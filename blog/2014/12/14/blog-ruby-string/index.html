
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>ruby字符串处理函数 - kk Blog —— 通用基础</title>

  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="kk Blog —— 通用基础" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <script src="/javascripts/category.js" type="text/javascript"></script>

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">kk Blog —— 通用基础</a></h1>
  
    <h2>date [-d @int|str] [+%s|"+%F %T"]</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
<li>
<form action="/search" method="get">
    <input class="search" name="query" id="query" type="text" placeholder="search...">
    <input id="btnSubmit" value="search" type="submit">
</form>
<script type="text/javascript">
var query = GetRequest("query");
if (query != null) {
	document.getElementById("query").value = query;
}
</script>
</li>
  <li><a href="/atom.xml" rel="subscribe-rss">RSS</a></li>
  
</ul>
  
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/download">Download</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h2 class="entry-title">ruby字符串处理函数</h2>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-12-14T15:15:00+08:00'><span class='date'>2014-12-14</span> <span class='time'>15:15:00</span></time>
        
      </p>
    
  </header>


<div class="entry-content"><h5>1.返回字符串的长度</h5>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>str.length =&gt; integer</span></code></pre></td></tr></table></div></figure>


<h5>2.字符串索引index</h5>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>str.index(substring [, offset])   =&gt; fixnum or nil
</span><span class='line'>str.index(fixnum [, offset])      =&gt; fixnum or nil
</span><span class='line'>str.index(regexp [, offset])      =&gt; fixnum or nil
</span><span class='line'>
</span><span class='line'>Returns the index of the first occurrence of the given substring, character (fixnum), 
</span><span class='line'>or pattern (regexp) in str. Returns nil if not found. If the second parameter is present, 
</span><span class='line'>it specifies the position in the string to begin the search.
</span><span class='line'>
</span><span class='line'>   "hello".index('e')             #=&gt; 1
</span><span class='line'>   "hello".index('lo')            #=&gt; 3
</span><span class='line'>   "hello".index('a')             #=&gt; nil
</span><span class='line'>   "hello".index(101)             #=&gt; 1
</span><span class='line'>   "hello".index(/[aeiou]/, -3)   #=&gt; 4</span></code></pre></td></tr></table></div></figure>


<h6>从尾到头rindex</h6>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>str.rindex(substring [, fixnum])   =&gt; fixnum or nil
</span><span class='line'>str.rindex(fixnum [, fixnum])   =&gt; fixnum or nil
</span><span class='line'>str.rindex(regexp [, fixnum])   =&gt; fixnum or nil
</span><span class='line'>
</span><span class='line'>Returns the index of the last occurrence of the given substring, character (fixnum), 
</span><span class='line'>or pattern (regexp) in str. Returns nil if not found. If the second parameter is present, 
</span><span class='line'>it specifies the position in the string to end the search---characters beyond this point will not be considered.
</span><span class='line'>
</span><span class='line'>   "hello".rindex('e')             #=&gt; 1
</span><span class='line'>   "hello".rindex('l')             #=&gt; 3
</span><span class='line'>   "hello".rindex('a')             #=&gt; nil
</span><span class='line'>   "hello".rindex(101)             #=&gt; 1
</span><span class='line'>   "hello".rindex(/[aeiou]/, -2)   #=&gt; 1</span></code></pre></td></tr></table></div></figure>


<h5>3.判断字符串中是否包含另一个串</h5>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>str.include? other_str =&gt; true or false
</span><span class='line'>"hello".include? "lo"   #=&gt; true
</span><span class='line'>"hello".include? "ol"   #=&gt; false
</span><span class='line'>"hello".include? ?h     #=&gt; true</span></code></pre></td></tr></table></div></figure>


<h5>4.字符串插入</h5>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>str.insert(index, other_str) =&gt; str
</span><span class='line'>"abcd".insert(0, 'X')    #=&gt; "Xabcd"
</span><span class='line'>"abcd".insert(3, 'X')    #=&gt; "abcXd"
</span><span class='line'>"abcd".insert(4, 'X')    #=&gt; "abcdX"
</span><span class='line'>"abcd".insert(-3, 'X')
</span><span class='line'>-3, 'X')   #=&gt; "abXcd"
</span><span class='line'>"abcd".insert(-1, 'X')   #=&gt; "abcdX"</span></code></pre></td></tr></table></div></figure>


<h5>5.字符串分隔,默认分隔符为空格</h5>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>str.split(pattern=$;, [limit]) =&gt; anArray
</span><span class='line'>" now's the time".split        #=&gt; ["now's", "the", "time"]
</span><span class='line'>"1, 2.34,56, 7".split(%r{,\s*}) #=&gt; ["1", "2.34", "56", "7"]
</span><span class='line'>"hello".split(//)               #=&gt; ["h", "e", "l", "l", "o"]
</span><span class='line'>"hello".split(//, 3)            #=&gt; ["h", "e", "llo"]
</span><span class='line'>"hi mom".split(%r{\s*})         #=&gt; ["h", "i", "m", "o", "m"]
</span><span class='line'>"mellow yellow".split("ello")   #=&gt; ["m", "w y", "w"]
</span><span class='line'>"1,2,,3,4,,".split(',')         #=&gt; ["1", "2", "", "3", "4"]
</span><span class='line'>"1,2,,3,4,,".split(',', 4)      #=&gt; ["1", "2", "", "3,4,,"]</span></code></pre></td></tr></table></div></figure>


<h5>6.字符串替换</h5>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>str.gsub(pattern, replacement) =&gt; new_str
</span><span class='line'>str.gsub(pattern) {|match| block } =&gt; new_str
</span><span class='line'>"hello".gsub(/[aeiou]/, '*')              #=&gt; "h*ll*"     #将元音替换成*号
</span><span class='line'>"hello".gsub(/([aeiou])/, '&lt;\1&gt;')         #=&gt; "h&lt;e&gt;ll&lt;o&gt;"   #将元音加上尖括号,\1表示保留原有字符???
</span><span class='line'>"hello".gsub(/./) {|s| s[0].to_s + ' '}   #=&gt; "104 101 108 108 111 "</span></code></pre></td></tr></table></div></figure>


<p>ruby中带“!&ldquo;和不带&rdquo;!&ldquo;的方法的最大的区别就是带”!"的会改变调用对象本身了。比方说str.gsub(/a/, &lsquo;b&rsquo;)，不会改变str本身，只会返回一个新的str。而str.gsub!(/a/, &lsquo;b&rsquo;)就会把str本身给改了。<br/>
但是gsub和gsub!还有另外一个不同点就是，gsub不管怎么样都会返回一个新的字符串，而gsub!只有在有字符被替换的情况下才会返回一个新的字符串，假如说没有任何字符被替换，gsub!只会返回nil.</p>

<h6>字符串替换二:</h6>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>str.replace(other_str) =&gt; str
</span><span class='line'>s = "hello"         #=&gt; "hello"
</span><span class='line'>s.replace "world"   #=&gt; "world"</span></code></pre></td></tr></table></div></figure>


<h5>7.字符串删除:</h5>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>str.delete([other_str]+) =&gt; new_str
</span><span class='line'>"hello".delete "l","lo"        #=&gt; "heo"
</span><span class='line'>"hello".delete "lo"            #=&gt; "he"
</span><span class='line'>"hello".delete "aeiou", "^e"   #=&gt; "hell"
</span><span class='line'>"hello".delete "ej-m"          #=&gt; "ho"</span></code></pre></td></tr></table></div></figure>


<h5>8.去掉前和后的空格</h5>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>str.lstrip =&gt; new_str
</span><span class='line'>" hello ".lstrip   #=&gt; "hello "
</span><span class='line'>"hello".lstrip       #=&gt; "hello"</span></code></pre></td></tr></table></div></figure>


<h5>9.字符串匹配</h5>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>str.match(pattern) =&gt; matchdata or nil</span></code></pre></td></tr></table></div></figure>


<h5>10.字符串反转</h5>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>str.reverse =&gt; new_str
</span><span class='line'>"stressed".reverse   #=&gt; "desserts"</span></code></pre></td></tr></table></div></figure>


<h5>11.去掉重复的字符</h5>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>str.squeeze([other_str]*) =&gt; new_str
</span><span class='line'>"yellow moon".squeeze                  #=&gt; "yelow mon" #默认去掉串中所有重复的字符
</span><span class='line'>" now   is the".squeeze(" ")         #=&gt; " now is the" #去掉串中重复的空格
</span><span class='line'>"putters shoot balls".squeeze("m-z")   #=&gt; "puters shot balls" #去掉指定范围内的重复字符</span></code></pre></td></tr></table></div></figure>


<h5>12.转化成数字</h5>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>str.to_i=&gt; str
</span><span class='line'>"12345".to_i             #=&gt; 12345</span></code></pre></td></tr></table></div></figure>



</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">kk</span></span>

      




<time class='entry-date' datetime='2014-12-14T15:15:00+08:00'><span class='date'>2014-12-14</span> <span class='time'>15:15:00</span></time>
      

<span class="categories">
  
    <a class='category' href='/blog/cats/blog/'>blog</a>, <a class='category' href='/blog/cats/blog~ruby/'>ruby</a>
  
</span>


    </p>
    
      
    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2014/12/14/blog-ruby-base/" title="Previous Post: ruby基础">&laquo; ruby基础</a>
      
      
        <a class="basic-alignment right" href="/blog/2014/12/16/kernel-net-softirq-rx/" title="Next Post: 收包软中断和netif_rx">收包软中断和netif_rx &raquo;</a>
      
    </p>
  </footer>
</article>

</div>
<aside class="sidebar" id='load_sidebar'>
</aside>
<script type="text/javascript">
  $('#load_sidebar').load('/sidebar.html');
</script>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2016 - kk -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
  <a title="Top" href="#" id="scroll2top" style="position: fixed; height: 50px; bottom: 30px; right: 25px; cursor: pointer; z-index: 9999; display: block; opacity: 1;"><img src="/images/scrollup.png"></a>
  <script src="/javascripts/scroll2top.js"></script>
  <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1253604690'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s95.cnzz.com/z_stat.php%3Fid%3D1253604690' type='text/javascript'%3E%3C/script%3E"));</script>
</p>

</footer>
  





</body>
</html>
