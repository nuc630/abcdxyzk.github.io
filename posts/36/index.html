
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>kk Blog —— 通用基础</title>

  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="kk Blog —— 通用基础" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <script src="/javascripts/category.js" type="text/javascript"></script>

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">kk Blog —— 通用基础</a></h1>
  
    <h2>cp -rf * .</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
<li>
<form action="/search" method="get">
    <input class="search" name="query" id="query" type="text" placeholder="search...">
    <input id="btnSubmit" value="search" type="submit">
</form>
<script type="text/javascript">
var query = GetRequest("query");
if (query != null) {
	document.getElementById("query").value = query;
}
</script>
</li>
  <li><a href="/atom.xml" rel="subscribe-rss">RSS</a></li>
  
</ul>
  
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/download">Download</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h2 class="entry-title"><a href="/blog/2015/02/09/kernel-mm-numa/">玩转CPU Topology</a></h2>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-02-09T16:19:00+08:00'><span class='date'>2015-02-09</span> <span class='time'>16:19:00</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://www.searchtb.com/2012/12/%E7%8E%A9%E8%BD%ACcpu-topology.html">http://www.searchtb.com/2012/12/%E7%8E%A9%E8%BD%ACcpu-topology.html</a></p>

<h4>先温习几个概念</h4>

<p>请原谅对部分术语笔者直接引用了wikipedia上的英文解释，因为哥实在做不到比wikipedia上更准确描述。我会试着解释部分的术语，并在本节的最后梳理一下这些术语之间的关系。注意，笔者对由于不准确的描述导致的性能下降，进程crash等任何问题不承担任何责任☺</p>

<p>NUMA：Non-Uniform Memory Access (NUMA) is a computer memory design used in multiprocessing, where the memory access time depends on the memory location relative to a processor. Under NUMA, a processor can access its own local memory faster than non-local memory, that is, memory local to another processor or memory shared between processors.NUMA architectures logically follow in scaling from symmetric multiprocessing (SMP) architectures.</p>

<p>提到NUMA就不能不对比SMP，</p>

<p>SMP：Symmetric multiprocessing (SMP) involves a multiprocessor computer hardware architecture where two or more identical processors are connected to a single shared main memory and are controlled by a single OS instance.</p>

<p>说了这么多其实都是为了介绍NUMA Node:</p>

<p>A fairly technically correct and also fairly ugly definition of a node is: a region of memory in which every byte has the same distance from each CPU.<br/>
A more common definition is: a block of memory and the CPUs, I/O, etc. physically on the same bus as the memory.</p>

<p>CPU：这个不解释，原因你懂得。想当年CPU拼的是频率，频率越高越NB，但是提升频率和制程密切相关。</p>

<p><img src="/images/kernel/2015-02-09-11.jpg" alt="" /></p>

<p>Intel cpu制程<br/>
但是制程这玩意有一个物理天花板，提升越来越难，有报道指出，现阶段普遍应用的硅晶体管在尺寸上有一个10nm的物理极限。为了提升性能cpu走上了多核的道路，即在一个封装（socket或者processor）里放多个core。这还不够，又发明了超线程技术Hyper-threading</p>

<p>HT：HT Technology is used to improve parallelization of computations (doing multiple tasks at once) performed on PC microprocessors. For each processor core that is physically present, the operating system addresses two virtual or logical cores, and shares the workload between them when possible. They appear to the OS as two processors, thus the OS can schedule two processes at once. 一个core 在HT之后OS看到的就是2个Logical Processor。</p>

<p>下图展示了这些术语之间的逻辑关系：</p>

<p><img src="/images/kernel/2015-02-09-12.jpg" alt="" /></p>

<h4>cpu 概念逻辑关系</h4>

<p>一个NUMA node包括一个或者多个Socket，以及与之相连的local memory。一个多核的Socket有多个Core。如果CPU支持HT，OS还会把这个Core看成 2个Logical Processor。为了避免混淆，在下文中统一用socket指代Processor or Socket;为了偷懒，下文中用Processor指代Logical Processor，击键能省则省不是。</p>

<h4>查看CPU Topology</h4>

<p>本文以笔者能访问的某台Red Hat Enterprise Linux Server release 5.4为例介绍，其他系统请自行google。</p>

<h5>NUMA Node</h5>

<p>第一种方法使用numactl查看</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>numactl --hardware
</span><span class='line'>available: 2 nodes (0-1)  //当前机器有2个NUMA node,编号0&amp;1
</span><span class='line'>node 0 size: 12091 MB  //node 0 物理内存大小
</span><span class='line'>node 0 free: 988 MB    //node 0 当前free内存大小
</span><span class='line'>node 1 size: 12120 MB
</span><span class='line'>node 1 free: 1206 MB
</span><span class='line'>node distances:        //node 距离，可以简单认为是CPU本node内存访问和跨node内存访问的成本。从下表可知跨node的内存访问成本（20）是本地node内存（10）的2倍。
</span><span class='line'>node   0   1
</span><span class='line'>  0:  10  20
</span><span class='line'>  1:  20  10</span></code></pre></td></tr></table></div></figure>


<p>第二种方法是通过sysfs查看，这种方式可以查看到更多的信息</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ls /sys/devices/system/node/
</span><span class='line'>1</span></code></pre></td></tr></table></div></figure>


<p>node0  node1 //两个目标表示本机有2个node，每个目录内部有多个文件和子目录描述node内cpu，内存等信息。比如说node0/meminfo描述了node0内存相关信息。</p>

<h5>Socket</h5>

<p>可以直接通过/proc/cpuinfo查看，cpuinfo里的physical id描述的就是Socket的编号，</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cat /proc/cpuinfo | grep "physical id"
</span><span class='line'>physical id     : 0
</span><span class='line'>physical id     : 0
</span><span class='line'>physical id     : 0
</span><span class='line'>physical id     : 0
</span><span class='line'>physical id     : 1
</span><span class='line'>physical id     : 1
</span><span class='line'>physical id     : 1
</span><span class='line'>physical id     : 1
</span><span class='line'>physical id     : 0
</span><span class='line'>physical id     : 0
</span><span class='line'>physical id     : 0
</span><span class='line'>physical id     : 0
</span><span class='line'>physical id     : 1
</span><span class='line'>physical id     : 1
</span><span class='line'>physical id     : 1
</span><span class='line'>physical id     : 1</span></code></pre></td></tr></table></div></figure>


<p>由上可知本机有2个Socket，编号为0和1。
还可以简单的使用如下命令直接查看Socket个数</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cat /proc/cpuinfo|grep "physical id" | sort -u | wc –l
</span><span class='line'>2   //本机有2个物理CPU封装</span></code></pre></td></tr></table></div></figure>


<h5>Core</h5>

<p>仍然是可以通过/proc/cpuinfo查看，cpuinfo中跟core相关的信息有2行。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cpu cores : 4 //一个socket有4个核，
</span><span class='line'>core id : 1 //一个core在socket内的编号</span></code></pre></td></tr></table></div></figure>


<p>通过如下命令可以直接查看core的数量</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cat /proc/cpuinfo | grep "cpu cores" | uniq | cut -d: -f2
</span><span class='line'>4  //1个socket有4个core</span></code></pre></td></tr></table></div></figure>


<ul>
<li>本机有2个socket，每个有4个core，所以一共有8个core</li>
</ul>


<p>还可以查看core在Socket里的编号</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cat /proc/cpuinfo | grep "core id" | sort -u
</span><span class='line'>core id         : 0
</span><span class='line'>core id         : 1
</span><span class='line'>core id         : 10
</span><span class='line'>core id         : 9</span></code></pre></td></tr></table></div></figure>


<p>一个socket里面4个core的编号为0,1,9,10。是的，core id是不连续的。如果谁知道为啥麻烦通知我，先谢了。</p>

<h5>Logical Processor</h5>

<p>仍然是可以通过/proc/cpuinfo查看在OS的眼里有多少个Logical Processor</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cat /proc/cpuinfo | grep processor | wc –l
</span><span class='line'>16</span></code></pre></td></tr></table></div></figure>


<p>Ok，8个core变成了16个Logical Processor，所以本机开启了HT。</p>

<p>问题来了，cpuinfo里面16个Processor编号为0-15，Core的id为0,1,9,10，Socket的id为0,1。这些编号是如何对应的呢？</p>

<p>我们查看一个Processor完整的cpuinfo就比较清楚了，我剔除了不相关的行：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>processor : 0    processor : 5
</span><span class='line'>physical id : 0
</span><span class='line'>siblings : 8
</span><span class='line'>core id : 0
</span><span class='line'>cpu cores : 4     physical id : 1
</span><span class='line'>siblings : 8
</span><span class='line'>core id : 1
</span><span class='line'>cpu cores : 4</span></code></pre></td></tr></table></div></figure>


<p>明白了？<br/>
Processor 0:在socket 0的core 0 里。<br/>
Processor 5：在socket 1的core 1 里。</p>

<h5>Cache</h5>

<p>仍然可以通过/proc/cpuinfo查看，OMG， cpuinfo难道是万能的？</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>processor       : 0
</span><span class='line'>cache size      : 12288 KB //cpu cache 大小
</span><span class='line'>cache_alignment : 64 </span></code></pre></td></tr></table></div></figure>


<p>问题又来了，我们知道CPU cache分为L1，L2，L3, L1一般还分为独立的指令cache和数据cache。Cpuinfo里这个cache size指的是？</p>

<p>好吧，cpuinfo也不是万能的。详细的cache信息可以通过sysfs查看</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ls /sys/devices/system/cpu/cpu0/cache/
</span><span class='line'>index0  index1  index2  index3</span></code></pre></td></tr></table></div></figure>


<p>4个目录 <br/>
index0: 1级数据cache<br/>
index1: 1级指令cache<br/>
index2: 2级cache<br/>
index3: 3级cache ,对应cpuinfo里的cache</p>

<p>目录里的文件是cache信息描述，以本机的cpu0/index0为例简单解释一下：</p>

<table border="1">
<tr>
<td>文件</td>
<td>内容</td>
<td>说明</td>
</tr>
<tr>
<td>type</td>
<td>Data</td>
<td>数据cache，如果查看index1就是Instruction</td>
</tr>
<tr>
<td>Level</td>
<td>1</td>
<td>L1</td>
</tr>
<tr>
<td>Size</td>
<td>32K</td>
<td>大小为32K</td>
</tr>
<tr>
<td>coherency_line_size</td>
<td>64</td>
<th rowspan="4">64*4*128=32K</th>
</tr>
<tr>
<td>physical_line_partition</td>
<td>1</td>
</tr>
<tr>
<td>ways_of_associativity</td>
<td>4</td>
</tr>
<tr>
<td>number_of_sets</td>
<td>128</td>
</tr>
<tr>
<td>shared_cpu_map</td>
<td>00000101</td>
<td>表示这个cache被CPU0和CPU8 share</td>
</tr>
</table>


<p>解释一下shared_cpu_map内容的格式：<br />
表面上看是2进制，其实是16进制表示，每个bit表示一个cpu，1个数字可以表示4个cpu<br />
截取00000101的后4位，转换为2进制表示</p>


<table border="1">
<tr>
<td>CPU id</td>
<td>15</td>
<td>14</td>
<td>13</td>
<td>12</td>
<td>11</td>
<td>10</td>
<td>9</td>
<td>8</td>
<td>7</td>
<td>6</td>
<td>5</td>
<td>4</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>0&#215;0101的2进制表示</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
</tr>
</table>


<p>0101表示cpu8和cpu0，即cpu0的L1 data cache是和cpu8共享的。<br/>
验证一下？</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cat /sys/devices/system/cpu/cpu8/cache/index0/shared_cpu_map
</span><span class='line'>00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000101</span></code></pre></td></tr></table></div></figure>


<p>再看一下index3 shared_cpu_map的例子</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cat /sys/devices/system/cpu/cpu0/cache/index3/shared_cpu_map
</span><span class='line'>00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000f0f</span></code></pre></td></tr></table></div></figure>


<table border="1">
<tr>
<td>CPU id</td>
<td>15</td>
<td>14</td>
<td>13</td>
<td>12</td>
<td>11</td>
<td>10</td>
<td>9</td>
<td>8</td>
<td>7</td>
<td>6</td>
<td>5</td>
<td>4</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>0x0f0f的2进制表示</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
</table>


<p>cpu0,1,2,3和cpu8,9,10,11共享L3 cache</p>

<h4>小结</h4>

<p>综合以上信息可以绘制出以下的cpu topology图:</p>

<p><img src="/images/kernel/2015-02-09-13.jpg" alt="" /></p>

<p>抱歉，图比较大，网页上看不清楚，下面放大单node图，另一个node基本上可以类推。</p>

<p><img src="/images/kernel/2015-02-09-14.jpg" alt="" /></p>

<h5>使用CPU Topology</h5>

<p>好吧，现在我们知道了如何查看CPU topology。那么这与各位攻城狮的工作有什么关系呢？</p>

<p>以淘宝搜索常见的服务模型为例，服务端把离线处理的数据load到内存中，开始监听某个服务端口，接收到客户端请求后从线程池中分配一个工作线程，该线程解析请求，读取内存中对应的数据，进行一些计算，然后把结果返回给客户端。</p>

<p>把这个过程简化简化再简化，抽象抽象再抽象，可以得到一个简单的测试程序，程序流程为：<br/>
1. 主线程申请2块256M的内存，使用memset初始化这两块内存的每个byte<br/>
2. 启动2个子线程，每个线程内循环16M次，在每次循环中随机读取2块内存中的各1K数据，对每个byte进行简单加和，返回。<br/>
3. 主线程等待子线程结束，打印每个线程的结果，结束。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#include &lt;stdio.h&gt;
</span><span class='line'>#include &lt;pthread.h&gt;
</span><span class='line'>#include &lt;stdlib.h&gt;
</span><span class='line'>#include &lt;string.h&gt;
</span><span class='line'>
</span><span class='line'>char *p1, *p2;
</span><span class='line'>
</span><span class='line'>int run(unsigned r)
</span><span class='line'>{
</span><span class='line'>&#9;    int i,j,k,ret=0;
</span><span class='line'>&#9;    unsigned r1,r2;
</span><span class='line'>&#9;    srand(r);
</span><span class='line'>&#9;    for (i=0;i&lt;(16&lt;&lt;20);i++) {
</span><span class='line'>&#9;            r1 = (unsigned)(rand() % ((256&lt;&lt;20)-(1&lt;&lt;10)));
</span><span class='line'>&#9;            r2 = (unsigned)(rand() % ((256&lt;&lt;20)-(1&lt;&lt;10)));
</span><span class='line'>&#9;            k = 0;
</span><span class='line'>&#9;            for (j=0;j&lt;(1&lt;&lt;10);j++) {
</span><span class='line'>&#9;                    k += *(p1+r1+j);
</span><span class='line'>&#9;                    k += *(p2+r2+j);
</span><span class='line'>&#9;            }
</span><span class='line'>&#9;            ret += k;
</span><span class='line'>&#9;    }
</span><span class='line'>&#9;    return ret;
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>int main()
</span><span class='line'>{
</span><span class='line'>&#9;    int i,j;
</span><span class='line'>&#9;    pthread_t pth1, pth2;
</span><span class='line'>&#9;    p1 = (char*)malloc(256&lt;&lt;20);
</span><span class='line'>&#9;    p2 = (char*)malloc(256&lt;&lt;20);
</span><span class='line'>&#9;    memset(p1, sizeof(p1), 0);
</span><span class='line'>&#9;    memset(p2, sizeof(p2), 0);
</span><span class='line'>&#9;    pthread_create(&pth1, NULL, run, 123);
</span><span class='line'>&#9;    pthread_create(&pth2, NULL, run, 456);
</span><span class='line'>&#9;    pthread_join(pth1, NULL);
</span><span class='line'>&#9;    pthread_join(pth2, NULL);
</span><span class='line'>&#9;    return 0;
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>使用-O2编译出可执行文件test，分别使用下面2个命令运行该程序。运行时间和机器配置以及当前load有关，绝对值没有意义，这里仅比较相对值。</p>

<table border="1">
<tr>
<td>命令</td>
<td>time ./test</td>
<td>time numactl -m 0 &#8211;physcpubind=2,3  ./test</td>
</tr>
<tr>
<td>用时</td>
<td><strong>real    0m38.678s</strong><br />
user    1m6.270s<br />
sys     0m5.569s
</td>
<td><strong>real    0m28.410s</strong><br />
user    0m54.997s<br />
sys     0m0.961s
</td>
</tr>
</table>


<p>发生了什么？为什么有这么大的差异？
第一个命令直观，那么我们看一下第二个命令具体做了什么：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>numactl -m 0 --physcpubind=2,3 ./test
</span><span class='line'>-m 0：在node 0上分配内存
</span><span class='line'>--physcpubind=2,3：在cpu 2和3上运行程序，即一个线程运行在cpu2上，另一个运行在cpu3上。</span></code></pre></td></tr></table></div></figure>


<p>参考上面的CPUtopology图就很容易理解了，由于线程绑定cpu2和3执行，共享了L3 cache，且全部内存都是本node访问，运行效率自然比随机选择cpu运行，运行中还有可能切换cpu，内存访问有可能跨node的第一种方式要快了。</p>

<p>接下来，让我们看看完整的表格，读者可以看看有没有惊喜：</p>

<table border="1">
<tr>
<td>情况</td>
<td>命令</td>
<td>用时</td>
<td>解释</td>
</tr>
<tr>
<td>完全由OS控制</td>
<td>time ./test</td>
<td>real    0m38.678s<br />
user    1m6.270s<br />
sys     0m5.569s
</td>
<td>乐观主义者，甩手掌柜型</td>
</tr>
<tr>
<td>绑定跨node的Cpu执行</td>
<td>time numactl &#8211;physcpubind=2,6  ./test</td>
<td>real    0m38.657s<br />
user    1m7.126s<br />
sys     0m5.045s
</td>
<td>Cpu 2和6不在同一个node，不能share L3 cache</td>
</tr>
<tr>
<td>绑定单node的Cpu执行</td>
<td>time numactl &#8211;physcpubind=2,3  ./test</td>
<td>real    0m28.605s<br />
user    0m55.161s<br />
sys     0m0.856s
</td>
<td>Cpu 2和3在同一个node，share L3 cache。内存使用由OS控制，一般来说node 0和1内存都会使用。</td>
</tr>
<tr>
<td>跨node内存访问+绑定单node CPU执行</td>
<td>time numactl -m 1 &#8211;physcpubind=2,3  ./test</td>
<td>real    0m33.218s<br />
user    1m4.494s<br />
sys     0m0.911s
</td>
<td>内存全使用node1，2个cpu在node0，内存访问比较吃亏</td>
</tr>
<tr>
<td>单node内存访问+绑定本node CPU执行</td>
<td>time numactl -m 0 &#8211;physcpubind=2,3  ./test</td>
<td>real    0m28.367s<br />
user    0m55.062s<br />
sys     0m0.825s
</td>
<td>内存&amp;cpu都使用node0</td>
</tr>
<tr>
<td>单node内存访问+绑定本node 单core执行</td>
<td>time numactl -m 0 &#8211;physcpubind=2,10  ./test</td>
<td>real    0m58.062s<br />
user    1m55.520s<br />
sys     0m0.270s
</td>
<td>CPU2和10不但在同一个node，且在同一个core，本意是希望共享L1，L2cache，提升性能。但是不要忘了，CPU2和10是HT出来的logical Processor，在本例cpu密集型的线程中硬件争用严重，效率急剧下降。有没有发现和上一个case的时间比率很有意思？</td>
</tr>
</table>


<p>现在谁还能说了解点cpu topology没用呢？☺</p>

<h4>Tips</h4>

<p>补充几个小tips，方便有兴趣的同学分析上面表格的各个case</p>

<h5>1.查看进程的内存numa node分布</h5>

<p>简单的说可以查看进程的numa_maps文件</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cat /proc/pid/numa_maps</span></code></pre></td></tr></table></div></figure>


<p>文件格式可以直接：man numa_maps<br/>
为了避免输入数字pid，我使用如下命令查看：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cat /proc/$(pidof test|cut –d” ” -f1)/numa_maps</span></code></pre></td></tr></table></div></figure>


<h5>2.查看线程run在哪个processor</h5>

<p>可以使用top命令查看一个进程的各个线程分别run在哪个processor上<br/>
同样，为了避免输入数字pid，我使用如下命令启动top：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>top -p$(pidof test |sed -e ‘s/ /,/g’)</span></code></pre></td></tr></table></div></figure>


<p>在默认配置下不显示线程信息，需要进入Top后按“shift+H”，打开线程显示。<br/>
另外，如果没有P列，还需要按“f”，按“j”，添加，这一列显示的数字就是这个线程上次run的processor id。<br/>
关于top的使用，请读者自行man top</p>

<h5>3.另一种绑定cpu执行的方法</h5>

<p>如果读者的程序不涉及大量内存的访问，可以通过taskset绑定cpu执行。别怪我没提醒你，仔细判断是否应该绑定到同一个core的processor上哦。<br/>
关于命令的使用，请读者自行Man taskset</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h2 class="entry-title"><a href="/blog/2015/02/09/system-base-attr/">隐藏权限--无法添加用户和组等</a></h2>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-02-09T15:59:00+08:00'><span class='date'>2015-02-09</span> <span class='time'>15:59:00</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>执行命令：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@localhost softwaretools]# groupadd mysql
</span><span class='line'>groupadd：无法打开组文件（groupadd: unable to open group file）</span></code></pre></td></tr></table></div></figure>


<p>此时就奇怪了，当前用的明明是root用户，为什么没有创建组和用户的权限呢。</p>

<p>结论：
  1，添加用户需要用到passwd和shadow这两个文件<br/>
  2，添加组需要用到shadow和gshadow这两个文件</p>

<p>使用 ls -l 命令发现权限正常。</p>

<p>最终发现问题，找到了2个命令（lsattr和chattr），是因为隐藏权限在作怪：<br/>
对这2个命令的简单做下说明：<br/>
  对于某些有特殊要求的档案(如服务器日志)还可以追加隐藏权限的设定。这些隐藏权限包括： Append only (a), compressed &copy;, no dump (d), immutable (i), data journalling (j),secure deletion (s), no tail-merging (t), undeletable (u), no atime updates (A), synchronous directory updates (D), synchronous updates (S), and top of directory hierarchy (T).  <br/>
  lsattr命令是查看隐藏权限设定情况的，chattr是变更隐藏权限的命令。</p>

<p>首先使用使用lsattr查看了一下这几个文件：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@localhost ~]# lsattr /etc/passwd  
</span><span class='line'>------------- /etc/passwd  
</span><span class='line'>[root@localhost ~]# lsattr /etc/group  
</span><span class='line'>----i-------- /etc/group  
</span><span class='line'>[root@localhost ~]# lsattr /etc/shadow  
</span><span class='line'>------------- /etc/shadow  
</span><span class='line'>[root@localhost ~]# lsattr /etc/gshadow  
</span><span class='line'>----i-------- /etc/gshadow  </span></code></pre></td></tr></table></div></figure>


<p>可以看到文件被设置的 i 这个隐藏权限，<br/>
i：设定文件不能被删除、改名、设定链接关系，同时不能写入或新增内容。<br/>
i参数对于文件 系统的安全设置有很大帮助。</p>

<p>既然这样只要把i权限去掉就应该好了。</p>

<p>使用命令chattr命令修改文件隐藏权限，执行如下命令：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>chattr -i /etc/gshadow
</span><span class='line'>chattr -i /etc/group</span></code></pre></td></tr></table></div></figure>


<p>然后可以正常执行了。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h2 class="entry-title"><a href="/blog/2015/02/09/kernel-mm-shm3/">Linux的IPC命令 查看共享内存</a></h2>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-02-09T15:46:00+08:00'><span class='date'>2015-02-09</span> <span class='time'>15:46:00</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://www.cnblogs.com/cocowool/archive/2012/05/22/2513027.html">http://www.cnblogs.com/cocowool/archive/2012/05/22/2513027.html</a></p>

<h4>进程间通信概述</h4>

<p>进程间通信有如下的目的：<br/>
1、数据传输，一个进程需要将它的数据发送给另一个进程，发送的数据量在一个字节到几M之间；<br/>
2、共享数据，多个进程想要操作共享数据，一个进程对数据的修改，其他进程应该立刻看到；<br/>
3、通知事件，一个进程需要向另一个或一组进程发送消息，通知它们发生了某件事情；<br/>
4、资源共享，多个进程之间共享同样的资源。为了做到这一点，需要内核提供锁和同步机制；<br/>
5、进程控制，有些进程希望完全控制另一个进程的执行（如Debug进程），此时控制进程希望能够拦截另一个进程的所有陷入和异常，并能够及时知道它的状态改变。</p>

<p>Linux进程间通信由以下几部分发展而来：<br/>
早期UNIX进程间通信：包括管道、FIFO、信号。<br/>
基于System V的进程间通信：包括System V消息队列、System V信号灯（Semaphore）、System V共享内存。<br/>
基于Socket进程间通信。<br/>
基于POSIX进程间通信：包括POSIX消息队列、POSIX信号灯、POSIX共享内存。<br/>
Linux中，与IPC相关的命令包括：ipcs、ipcrm（释放IPC）、</p>

<p>IPCS命令是Linux下显示进程间通信设施状态的工具。我们知道，系统进行进程间通信（IPC）的时候，可用的方式包括信号量、共享内存、消息队列、管道、信号（signal）、套接字等形式[2]。使用IPCS可以查看共享内存、信号量、消息队列的状态。</p>

<p>例如在CentOS6.0上执行ipcs</p>

<p><img src="/images/kernel/2015-02-09-2.png" alt="" /></p>

<p>具体的用法总结如下：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>1、显示所有的IPC设施
</span><span class='line'># ipcs -a
</span><span class='line'>
</span><span class='line'>2、显示所有的消息队列Message Queue
</span><span class='line'># ipcs -q
</span><span class='line'>
</span><span class='line'>3、显示所有的信号量
</span><span class='line'># ipcs -s
</span><span class='line'>
</span><span class='line'>4、显示所有的共享内存
</span><span class='line'># ipcs -m
</span><span class='line'>
</span><span class='line'>5、显示IPC设施的详细信息
</span><span class='line'># ipcs -q -i id
</span><span class='line'>id 对应shmid、semid、msgid等。-q对应设施的类型（队列），查看信号量详细情况使用-s，查看共享内存使用-m。
</span><span class='line'>
</span><span class='line'>6、显示IPC设施的限制大小
</span><span class='line'># ipcs -m -l
</span><span class='line'>-m对应设施类型，可选参数包括-q、-m、-s。
</span><span class='line'>
</span><span class='line'>7、显示IPC设施的权限关系
</span><span class='line'># ipcs -c
</span><span class='line'># ipcs -m -c
</span><span class='line'># ipcs -q -c
</span><span class='line'># ipcs -s -c
</span><span class='line'>
</span><span class='line'>8、显示最近访问过IPC设施的进程ID。
</span><span class='line'># ipcs -p
</span><span class='line'># ipcs -m -p
</span><span class='line'># ipcs -q -p
</span><span class='line'>
</span><span class='line'>9、显示IPC设施的最后操作时间
</span><span class='line'># ipcs -t
</span><span class='line'># ipcs -q -t
</span><span class='line'># ipcs -m -t
</span><span class='line'># ipcs -s -t
</span><span class='line'>
</span><span class='line'>10、显示IPC设施的当前状态
</span><span class='line'># ipcs -u</span></code></pre></td></tr></table></div></figure>


<p>Linux上的ipcs命令，不支持UNIX上的-b、-o指令，同样UNIX中不支持-l、-u指令，所以在编写跨平台的脚本时，需要注意这个问题。</p>

<h4>参考资料：</h4>

<p>1、<a href="http://wenku.baidu.com/view/58048caddd3383c4bb4cd26f.html">Linux下IPCS的用法详解</a><br/>
2、<a href="http://www.cnblogs.com/linshui91/archive/2010/09/29/1838770.html">Linux进程间通信</a><br/>
3、<a href="http://blog.csdn.net/bonny95/article/details/6442821">Linux下IPCS的10种用法</a><br/>
4、<a href="http://www.linuxdiyf.com/viewarticle.php?id=6783">Linux IPC小结</a><br/>
5、<a href="http://www.cnblogs.com/wangkangluo1/archive/2012/05/14/2498786.html">Linux IPC总结</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h2 class="entry-title"><a href="/blog/2015/02/09/kernel-mm-shm2/">修改共享内存大小</a></h2>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-02-09T15:33:00+08:00'><span class='date'>2015-02-09</span> <span class='time'>15:33:00</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://blog.csdn.net/l_yangliu/article/details/11193187">http://blog.csdn.net/l_yangliu/article/details/11193187</a></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>beijibing@bjb-desktop:/proc/sys/kernel$ cat shmmax 
</span><span class='line'>33554432
</span><span class='line'>beijibing@bjb-desktop:/proc/sys/kernel$ cat shmmni
</span><span class='line'>4096
</span><span class='line'>beijibing@bjb-desktop:/proc/sys/kernel$ cat msgmax
</span><span class='line'>8192
</span><span class='line'>beijibing@bjb-desktop:/proc/sys/kernel$ cat msgmni
</span><span class='line'>622
</span><span class='line'>beijibing@bjb-desktop:/proc/sys/kernel$ cat msgmnb
</span><span class='line'>16384</span></code></pre></td></tr></table></div></figure>


<h4>System V IPC 参数</h4>

<table border="1">
<tr>
    <th>名字</th> <th>描述</th> <th>合理取值</th>
</tr>
<tr>
    <td>SHMMAX</td> <td>最大共享内存段尺寸（字节）</td> <td>最少若干兆（见文本）</td>
</tr>
<tr>
    <td>SHMMIN</td> <td>最小共享内存段尺寸（字节）</td> <td>1</td>
</tr>
<tr>
    <td>SHMALL</td> <td>可用共享内存的总数量（字节或者页面）</td> <td>如果是字节，就和 SHMMAX 一样；如果是页面，ceil(SHMMAX/PAGE_SIZE)</td>
</tr>
<tr>
    <td>SHMSEG</td> <td>每进程最大共享内存段数量</td> <td>只需要 1 个段，不过缺省比这高得多。</td>
</tr>
<tr>
    <td>SHMMNI</td> <td>系统范围最大共享内存段数量</td> <td>类似 SHMSEG 加上用于其他应用的空间</td>
</tr>
<tr>
    <td>SEMMNI</td> <td>信号灯标识符的最小数量（也就是说，套）</td> <td>至少 ceil(max_connections / 16)</td>
</tr>
<tr>
    <td>SEMMNS</td> <td>系统范围的最大信号灯数量</td> <td>ceil(max_connections / 16) * 17 加上用于其他应用的空间</td>
</tr>
<tr>
    <td>SEMMSL</td> <td>每套信号灯最小信号灯数量</td> <td>至少 17</td>
</tr>
<tr>
    <td>SEMMAP</td> <td>信号灯映射里的记录数量</td> <td>参阅文本</td>
</tr>
<tr>
    <td>SEMVMX</td> <td>信号灯的最大值</td> <td>至少 1000 （缺省通常是32767，除非被迫，否则不要修改）</td>
</tr>
</table>


<p>  最重要的共享内存参数是 SHMMAX ， 以字节记的共享内存段可拥有的最大尺寸。如果你收到来自shmget 的类似Invalid argument 这样的错误信息，那么很有可能是你超过限制了。</p>

<p>  有些系统对系统里面共享内存的总数（SHMALL ）还有限制。 请注意这个数值必须足够大。（注意：SHMALL 在很多系统上是用页面数，而不是字节数来计算的。）</p>

<p>  系统里的最大信号灯数目是由SEMMNS 设置的，因此这个值应该至少和 max_connections 设置一样大，并且每十六个联接还要另外加一个。  参数SEMMNI 决定系统里一次可以存在的信号灯集的数目。 因此这个参数至少应该为 ceil(max_connections % 16) 。降低允许的联接数目是一个临时的绕开失败的方法，这个启动失败通常被来自函数semget 的错误响应 No space left on device 搞得很让人迷惑。</p>

<p>  有时候还可能有必要增大SEMMAP ，使之至少按照 SEMMNS 配置。这个参数定义信号灯资源映射的尺寸，可用的每个连续的信号灯块在这个映射中存放一条记录。每当一套信号灯被释放，那么它要么会加入到该映射中一条相连的已释放的块的入口中，要么注册成一条新的入口。如果映射填满了碎片，那么被释放的信号灯就丢失了（除非重起）。因此时间长信号灯空间的碎片了会导致可用的信号灯比应该有的信号灯少。</p>

<p>SEMMSL 参数，决定一套信号灯里可以有多少信号灯，</p>

<h4>更改方法</h4>

<p>  缺省设置只适合小安装（缺省最大共享内存是 32 MB）。不过，其它的缺省值都相当大，通常不需要改变。最大的共享内存段设置可以用 sysctl 接口设置。 比如，要允许 128 MB，并且最大的总共享内存数为 2097152 页（缺省）：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sysctl -w kernel.shmmax=134217728
</span><span class='line'>$ sysctl -w kernel.shmall=2097152</span></code></pre></td></tr></table></div></figure>


<p>  你可以把这些设置放到 /etc/sysctl.conf 里，在重启后保持有效。</p>

<p>  老版本里可能没有 sysctl 程序，但是同样的改变可以通过操作 /proc 文件系统来做：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ echo 134217728 &gt; /proc/sys/kernel/shmmax
</span><span class='line'>$ echo 2097152 &gt; /proc/sys/kernel/shmall</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h2 class="entry-title"><a href="/blog/2015/02/09/kernel-mm-shm1/">共享内存</a></h2>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-02-09T15:23:00+08:00'><span class='date'>2015-02-09</span> <span class='time'>15:23:00</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://blog.csdn.net/wc7620awjh/article/details/7721331">http://blog.csdn.net/wc7620awjh/article/details/7721331</a></p>

<p>  共享内存是被多个进程共享的一部分物理内存。共享内存是进程间共享数据的一种最快的方法，一个进程向共享内存区域写入了数据，共享这个内存区域的所有进程就可以立刻看到其中的内容。原理图如下：</p>

<p><img src="/images/kernel/2015-02-09-1.jpg" alt="" /></p>

<p>共享内存的实现分为两个步骤：<br/>
一、 创建共享内存，使用shmget函数。
二、 映射共享内存，将这段创建的共享内存映射到具体的进程空间去，使用shmat函数。</p>

<h4>创建共享内存</h4>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>int shmget(key_t key ,int size,int shmflg)</span></code></pre></td></tr></table></div></figure>


<p>key标识共享内存的键值：0/IPC_PRIVATE。当key的取值为IPC_PRIVATE,则函数shmget将创建一块新的共享内存；如果key的取值为0，而参数中又设置了IPC_PRIVATE这个标志，则同样会创建一块新的共享内存。</p>

<p>返回值：如果成功，返回共享内存表示符，如果失败，返回-1。</p>

<h4>映射共享内存</h4>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>int shmat(int shmid,char *shmaddr，int flag)</span></code></pre></td></tr></table></div></figure>


<p>参数：<br/>
shmid:shmget函数返回的共享存储标识符<br/>
flag：决定以什么样的方式来确定映射的地址(通常为0)</p>

<p>返回值：<br/>
如果成功，则返回共享内存映射到进程中的地址；如果失败，则返回-1。<br/>
共享内存解除映射</p>

<p>当一个进程不再需要共享内存时，需要把它从进程地址空间中多里。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>int shmdt(char *shmaddr)</span></code></pre></td></tr></table></div></figure>


<p>贡献内存实例如下：<br/>
实验要求：创建两个进程，在A进程中创建一个共享内存，并向其写入数据，通过B进程从共享内存中读取数据。</p>

<h5>chm_com.h函数</h5>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#define TEXT_SZ 2048  
</span><span class='line'>
</span><span class='line'>struct shared_use_st  
</span><span class='line'>{  
</span><span class='line'>&#9;int written_by_you;  
</span><span class='line'>&#9;char some_text[TEXT_SZ];  
</span><span class='line'>};  </span></code></pre></td></tr></table></div></figure>


<h5>读取进程：</h5>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#include &lt;unistd.h&gt;  
</span><span class='line'>#include &lt;stdlib.h&gt;  
</span><span class='line'>#include &lt;stdio.h&gt;  
</span><span class='line'>#include &lt;string.h&gt;  
</span><span class='line'>#include &lt;sys/types.h&gt;  
</span><span class='line'>#include &lt;sys/ipc.h&gt;  
</span><span class='line'>#include &lt;sys/shm.h&gt;  
</span><span class='line'>#include "shm_com.h"  
</span><span class='line'>  
</span><span class='line'>/* 
</span><span class='line'> * 程序入口 
</span><span class='line'> * */  
</span><span class='line'>int main(void)  
</span><span class='line'>{  
</span><span class='line'>&#9;int running=1;  
</span><span class='line'>&#9;void *shared_memory=(void *)0;  
</span><span class='line'>&#9;struct shared_use_st *shared_stuff;  
</span><span class='line'>&#9;int shmid;  
</span><span class='line'>&#9;/*创建共享内存*/  
</span><span class='line'>&#9;shmid=shmget((key_t)1234,sizeof(struct shared_use_st),0666|IPC_CREAT);  
</span><span class='line'>&#9;if(shmid==-1)  
</span><span class='line'>&#9;{  
</span><span class='line'>&#9;&#9;fprintf(stderr,"shmget failed\n");  
</span><span class='line'>&#9;&#9;exit(EXIT_FAILURE);  
</span><span class='line'>&#9;}  
</span><span class='line'>  
</span><span class='line'>&#9;/*映射共享内存*/  
</span><span class='line'>&#9;shared_memory=shmat(shmid,(void *)0,0);  
</span><span class='line'>&#9;if(shared_memory==(void *)-1)  
</span><span class='line'>&#9;{  
</span><span class='line'>&#9;&#9;fprintf(stderr,"shmat failed\n");  
</span><span class='line'>&#9;&#9;exit(EXIT_FAILURE);  
</span><span class='line'>&#9;}  
</span><span class='line'>&#9;printf("Memory attached at %X\n",(int)shared_memory);  
</span><span class='line'>  
</span><span class='line'>&#9;/*让结构体指针指向这块共享内存*/  
</span><span class='line'>&#9;shared_stuff=(struct shared_use_st *)shared_memory;  
</span><span class='line'>  
</span><span class='line'>&#9;/*控制读写顺序*/  
</span><span class='line'>&#9;shared_stuff-&gt;written_by_you=0;  
</span><span class='line'>&#9;/*循环的从共享内存中读数据，直到读到“end”为止*/  
</span><span class='line'>&#9;while(running)  
</span><span class='line'>&#9;{  
</span><span class='line'>&#9;   if(shared_stuff-&gt;written_by_you)  
</span><span class='line'>&#9;   {  
</span><span class='line'>&#9;&#9;   printf("You wrote:%s",shared_stuff-&gt;some_text);  
</span><span class='line'>&#9;&#9;   sleep(1);  //读进程睡一秒，同时会导致写进程睡一秒，这样做到读了之后再写  
</span><span class='line'>&#9;&#9;   shared_stuff-&gt;written_by_you=0;  
</span><span class='line'>&#9;&#9;   if(strncmp(shared_stuff-&gt;some_text,"end",3)==0)  
</span><span class='line'>&#9;&#9;   {  
</span><span class='line'>&#9;&#9;&#9;   running=0; //结束循环  
</span><span class='line'>&#9;&#9;   }  
</span><span class='line'>&#9;   }  
</span><span class='line'>&#9;}  
</span><span class='line'>&#9;/*删除共享内存*/  
</span><span class='line'>&#9;if(shmdt(shared_memory)==-1)  
</span><span class='line'>&#9;{  
</span><span class='line'>&#9;&#9;fprintf(stderr,"shmdt failed\n");  
</span><span class='line'>&#9;&#9;exit(EXIT_FAILURE);  
</span><span class='line'>&#9;}  
</span><span class='line'>&#9;   exit(EXIT_SUCCESS);  
</span><span class='line'>}  </span></code></pre></td></tr></table></div></figure>


<h5>写入进程：</h5>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#include &lt;unistd.h&gt;  
</span><span class='line'>#include &lt;stdlib.h&gt;  
</span><span class='line'>#include &lt;stdio.h&gt;  
</span><span class='line'>#include &lt;string.h&gt;  
</span><span class='line'>#include &lt;sys/types.h&gt;  
</span><span class='line'>#include &lt;sys/ipc.h&gt;  
</span><span class='line'>#include &lt;sys/shm.h&gt;  
</span><span class='line'>#include "shm_com.h"  
</span><span class='line'>  
</span><span class='line'>/* 
</span><span class='line'> * 程序入口 
</span><span class='line'> * */  
</span><span class='line'>int main(void)  
</span><span class='line'>{  
</span><span class='line'>&#9;int running=1;  
</span><span class='line'>&#9;void *shared_memory=(void *)0;  
</span><span class='line'>&#9;struct shared_use_st *shared_stuff;  
</span><span class='line'>&#9;char buffer[BUFSIZ];  
</span><span class='line'>&#9;int shmid;  
</span><span class='line'>&#9;/*创建共享内存*/  
</span><span class='line'>&#9;shmid=shmget((key_t)1234,sizeof(struct shared_use_st),0666|IPC_CREAT);  
</span><span class='line'>&#9;if(shmid==-1)  
</span><span class='line'>&#9;{  
</span><span class='line'>&#9;&#9;fprintf(stderr,"shmget failed\n");  
</span><span class='line'>&#9;&#9;exit(EXIT_FAILURE);  
</span><span class='line'>&#9;}  
</span><span class='line'>  
</span><span class='line'>&#9;/*映射共享内存*/  
</span><span class='line'>&#9;shared_memory=shmat(shmid,(void *)0,0);  
</span><span class='line'>&#9;if(shared_memory==(void *)-1)  
</span><span class='line'>&#9;{  
</span><span class='line'>&#9;&#9;fprintf(stderr,"shmat failed\n");  
</span><span class='line'>&#9;&#9;exit(EXIT_FAILURE);  
</span><span class='line'>&#9;}  
</span><span class='line'>&#9;printf("Memory attached at %X\n",(int)shared_memory);  
</span><span class='line'>  
</span><span class='line'>&#9;/*让结构体指针指向这块共享内存*/  
</span><span class='line'>&#9;shared_stuff=(struct shared_use_st *)shared_memory;  
</span><span class='line'>&#9;/*循环的向共享内存中写数据，直到写入的为“end”为止*/  
</span><span class='line'>&#9;while(running)  
</span><span class='line'>&#9;{  
</span><span class='line'>&#9;&#9;while(shared_stuff-&gt;written_by_you==1)  
</span><span class='line'>&#9;&#9;{  
</span><span class='line'>&#9;&#9;&#9;sleep(1);//等到读进程读完之后再写  
</span><span class='line'>&#9;&#9;&#9;printf("waiting for client...\n");  
</span><span class='line'>&#9;&#9;}  
</span><span class='line'>&#9;&#9;printf("Ener some text:");  
</span><span class='line'>&#9;&#9;fgets(buffer,BUFSIZ,stdin);  
</span><span class='line'>&#9;&#9;strncpy(shared_stuff-&gt;some_text,buffer,TEXT_SZ);  
</span><span class='line'>&#9;&#9;shared_stuff-&gt;written_by_you=1;  
</span><span class='line'>&#9;&#9;if(strncmp(buffer,"end",3)==0)  
</span><span class='line'>&#9;&#9;{  
</span><span class='line'>&#9;&#9;&#9;running=0;  //结束循环  
</span><span class='line'>&#9;&#9;}  
</span><span class='line'>&#9;}  
</span><span class='line'>&#9;/*删除共享内存*/  
</span><span class='line'>&#9;if(shmdt(shared_memory)==-1)  
</span><span class='line'>&#9;{  
</span><span class='line'>&#9;&#9;fprintf(stderr,"shmdt failed\n");  
</span><span class='line'>&#9;&#9;exit(EXIT_FAILURE);  
</span><span class='line'>&#9;}  
</span><span class='line'>&#9;exit(EXIT_SUCCESS);  
</span><span class='line'>}  </span></code></pre></td></tr></table></div></figure>


<h5>运行</h5>

<p>  在一个终端中运行shm1，在另一个终端中运行shm2.当shm1运行起来之后，由于共享内存中没有数据可读，会处于等待状态</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@localhost 2-4-4]# ./shm1
</span><span class='line'>Memory attached at B7F9A000
</span><span class='line'>
</span><span class='line'>/***阻塞***/</span></code></pre></td></tr></table></div></figure>


<p>再向shm2运行的终端输入字符串</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@localhost 2-4-4]# ./shm2
</span><span class='line'>Memory attached at B7FD8000
</span><span class='line'>Enter some text：Impossible is nothing
</span><span class='line'>waiting for client。。。
</span><span class='line'>waiting for client。。。
</span><span class='line'>Enter some text：Anything is possible
</span><span class='line'>waiting for client。。。
</span><span class='line'>Ener some text：end
</span><span class='line'>[root@localhost 2-4-4]#</span></code></pre></td></tr></table></div></figure>


<p>shm1能够逐个从共享内存中巴他们读出来，知道双方晕倒字符串"end"后，两个程序都退出。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@localhost 2-4-4]# ./shm1
</span><span class='line'>Memory attached at B7F9A000
</span><span class='line'>You write：Impossible is nothing
</span><span class='line'>You write：Anything is possible
</span><span class='line'>You write：end
</span><span class='line'>[root@localhost 2-4-4]#</span></code></pre></td></tr></table></div></figure>


<p>以上运行过程中，红色表示在终端1中运行的结果，蓝色表示在终端2里面运行的结果。</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/37">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/35">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
<h1>Categories</h1>
<head>
</head>
<body>
<div id="menu">
<ul>
<li class='catclass'><a href='/blog/cats/language/'>language</a><a href='##' onmousedown=showDiv('language') id='aexp_language'><span class='exp_style' id='exp_language'>[+]</span></a><span class='right_span'>(39)</span></li>
<div id='language' class='catsub'><li><a href='/blog/cats/language~c/?opendiv=language'>c</a><a href='##' onmousedown=showDiv('language~c') id='aexp_language~c'><span class='exp_style' id='exp_language~c'>[+]</span></a><span class='right_span'>22</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('language~c')) document.getElementById('aexp_language~c').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/language~java/?opendiv=language'>java</a><a href='##' onmousedown=showDiv('language~java') id='aexp_language~java'><span class='exp_style' id='exp_language~java'>[+]</span></a><span class='right_span'>11</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('language~java')) document.getElementById('aexp_language~java').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/language~web/?opendiv=language'>web</a><a href='##' onmousedown=showDiv('language~web') id='aexp_language~web'><span class='exp_style' id='exp_language~web'>[+]</span></a><span class='right_span'>6</span></li>
</div><script language='javascript' type='text/javascript'>
if (!document.getElementById('language')) document.getElementById('aexp_language').style.visibility = 'hidden';
if (!document.getElementById('language~web')) document.getElementById('aexp_language~web').style.visibility = 'hidden';
</script>
<li class='catclass'><a href='/blog/cats/compiler/'>compiler</a><a href='##' onmousedown=showDiv('compiler') id='aexp_compiler'><span class='exp_style' id='exp_compiler'>[+]</span></a><span class='right_span'>(14)</span></li>
<div id='compiler' class='catsub'><li><a href='/blog/cats/compiler~base/?opendiv=compiler'>base</a><a href='##' onmousedown=showDiv('compiler~base') id='aexp_compiler~base'><span class='exp_style' id='exp_compiler~base'>[+]</span></a><span class='right_span'>10</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('compiler~base')) document.getElementById('aexp_compiler~base').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/compiler~make/?opendiv=compiler'>make</a><a href='##' onmousedown=showDiv('compiler~make') id='aexp_compiler~make'><span class='exp_style' id='exp_compiler~make'>[+]</span></a><span class='right_span'>4</span></li>
</div><script language='javascript' type='text/javascript'>
if (!document.getElementById('compiler')) document.getElementById('aexp_compiler').style.visibility = 'hidden';
if (!document.getElementById('compiler~make')) document.getElementById('aexp_compiler~make').style.visibility = 'hidden';
</script>
<li class='catclass'><a href='/blog/cats/assembly/'>assembly</a><a href='##' onmousedown=showDiv('assembly') id='aexp_assembly'><span class='exp_style' id='exp_assembly'>[+]</span></a><span class='right_span'>(15)</span></li>
<div id='assembly' class='catsub'><li><a href='/blog/cats/assembly~arm/?opendiv=assembly'>arm</a><a href='##' onmousedown=showDiv('assembly~arm') id='aexp_assembly~arm'><span class='exp_style' id='exp_assembly~arm'>[+]</span></a><span class='right_span'>2</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('assembly~arm')) document.getElementById('aexp_assembly~arm').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/assembly~base/?opendiv=assembly'>base</a><a href='##' onmousedown=showDiv('assembly~base') id='aexp_assembly~base'><span class='exp_style' id='exp_assembly~base'>[+]</span></a><span class='right_span'>13</span></li>
</div><script language='javascript' type='text/javascript'>
if (!document.getElementById('assembly')) document.getElementById('aexp_assembly').style.visibility = 'hidden';
if (!document.getElementById('assembly~base')) document.getElementById('aexp_assembly~base').style.visibility = 'hidden';
</script>
<li class='catclass'><a href='/blog/cats/tools/'>tools</a><a href='##' onmousedown=showDiv('tools') id='aexp_tools'><span class='exp_style' id='exp_tools'>[+]</span></a><span class='right_span'>(52)</span></li>
<div id='tools' class='catsub'><li><a href='/blog/cats/tools~base/?opendiv=tools'>base</a><a href='##' onmousedown=showDiv('tools~base') id='aexp_tools~base'><span class='exp_style' id='exp_tools~base'>[+]</span></a><span class='right_span'>14</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('tools~base')) document.getElementById('aexp_tools~base').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/tools~ci/?opendiv=tools'>ci</a><a href='##' onmousedown=showDiv('tools~ci') id='aexp_tools~ci'><span class='exp_style' id='exp_tools~ci'>[+]</span></a><span class='right_span'>3</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('tools~ci')) document.getElementById('aexp_tools~ci').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/tools~command/?opendiv=tools'>command</a><a href='##' onmousedown=showDiv('tools~command') id='aexp_tools~command'><span class='exp_style' id='exp_tools~command'>[+]</span></a><span class='right_span'>11</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('tools~command')) document.getElementById('aexp_tools~command').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/tools~git/?opendiv=tools'>git</a><a href='##' onmousedown=showDiv('tools~git') id='aexp_tools~git'><span class='exp_style' id='exp_tools~git'>[+]</span></a><span class='right_span'>6</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('tools~git')) document.getElementById('aexp_tools~git').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/tools~haproxy/?opendiv=tools'>haproxy</a><a href='##' onmousedown=showDiv('tools~haproxy') id='aexp_tools~haproxy'><span class='exp_style' id='exp_tools~haproxy'>[+]</span></a><span class='right_span'>9</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('tools~haproxy')) document.getElementById('aexp_tools~haproxy').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/tools~mysql/?opendiv=tools'>mysql</a><a href='##' onmousedown=showDiv('tools~mysql') id='aexp_tools~mysql'><span class='exp_style' id='exp_tools~mysql'>[+]</span></a><span class='right_span'>6</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('tools~mysql')) document.getElementById('aexp_tools~mysql').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/tools~ssh/?opendiv=tools'>ssh</a><a href='##' onmousedown=showDiv('tools~ssh') id='aexp_tools~ssh'><span class='exp_style' id='exp_tools~ssh'>[+]</span></a><span class='right_span'>3</span></li>
</div><script language='javascript' type='text/javascript'>
if (!document.getElementById('tools')) document.getElementById('aexp_tools').style.visibility = 'hidden';
if (!document.getElementById('tools~ssh')) document.getElementById('aexp_tools~ssh').style.visibility = 'hidden';
</script>
<li class='catclass'><a href='/blog/cats/system/'>system</a><a href='##' onmousedown=showDiv('system') id='aexp_system'><span class='exp_style' id='exp_system'>[+]</span></a><span class='right_span'>(51)</span></li>
<div id='system' class='catsub'><li><a href='/blog/cats/system~base/?opendiv=system'>base</a><a href='##' onmousedown=showDiv('system~base') id='aexp_system~base'><span class='exp_style' id='exp_system~base'>[+]</span></a><span class='right_span'>14</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('system~base')) document.getElementById('aexp_system~base').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/system~centos/?opendiv=system'>centos</a><a href='##' onmousedown=showDiv('system~centos') id='aexp_system~centos'><span class='exp_style' id='exp_system~centos'>[+]</span></a><span class='right_span'>8</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('system~centos')) document.getElementById('aexp_system~centos').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/system~cgroup/?opendiv=system'>cgroup</a><a href='##' onmousedown=showDiv('system~cgroup') id='aexp_system~cgroup'><span class='exp_style' id='exp_system~cgroup'>[+]</span></a><span class='right_span'>11</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('system~cgroup')) document.getElementById('aexp_system~cgroup').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/system~kvm/?opendiv=system'>kvm</a><a href='##' onmousedown=showDiv('system~kvm') id='aexp_system~kvm'><span class='exp_style' id='exp_system~kvm'>[+]</span></a><span class='right_span'>7</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('system~kvm')) document.getElementById('aexp_system~kvm').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/system~namespace/?opendiv=system'>namespace</a><a href='##' onmousedown=showDiv('system~namespace') id='aexp_system~namespace'><span class='exp_style' id='exp_system~namespace'>[+]</span></a><span class='right_span'>2</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('system~namespace')) document.getElementById('aexp_system~namespace').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/system~ubuntu/?opendiv=system'>ubuntu</a><a href='##' onmousedown=showDiv('system~ubuntu') id='aexp_system~ubuntu'><span class='exp_style' id='exp_system~ubuntu'>[+]</span></a><span class='right_span'>9</span></li>
</div><script language='javascript' type='text/javascript'>
if (!document.getElementById('system')) document.getElementById('aexp_system').style.visibility = 'hidden';
if (!document.getElementById('system~ubuntu')) document.getElementById('aexp_system~ubuntu').style.visibility = 'hidden';
</script>
<li class='catclass'><a href='/blog/cats/kernel/'>kernel</a><a href='##' onmousedown=showDiv('kernel') id='aexp_kernel'><span class='exp_style' id='exp_kernel'>[+]</span></a><span class='right_span'>(156)</span></li>
<div id='kernel' class='catsub'><li><a href='/blog/cats/kernel~base/?opendiv=kernel'>base</a><a href='##' onmousedown=showDiv('kernel~base') id='aexp_kernel~base'><span class='exp_style' id='exp_kernel~base'>[+]</span></a><span class='right_span'>18</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('kernel~base')) document.getElementById('aexp_kernel~base').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/kernel~fs/?opendiv=kernel'>fs</a><a href='##' onmousedown=showDiv('kernel~fs') id='aexp_kernel~fs'><span class='exp_style' id='exp_kernel~fs'>[+]</span></a><span class='right_span'>1</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('kernel~fs')) document.getElementById('aexp_kernel~fs').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/kernel~irq/?opendiv=kernel'>irq</a><a href='##' onmousedown=showDiv('kernel~irq') id='aexp_kernel~irq'><span class='exp_style' id='exp_kernel~irq'>[+]</span></a><span class='right_span'>10</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('kernel~irq')) document.getElementById('aexp_kernel~irq').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/kernel~kexec/?opendiv=kernel'>kexec</a><a href='##' onmousedown=showDiv('kernel~kexec') id='aexp_kernel~kexec'><span class='exp_style' id='exp_kernel~kexec'>[+]</span></a><span class='right_span'>1</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('kernel~kexec')) document.getElementById('aexp_kernel~kexec').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/kernel~mm/?opendiv=kernel'>mm</a><a href='##' onmousedown=showDiv('kernel~mm') id='aexp_kernel~mm'><span class='exp_style' id='exp_kernel~mm'>[+]</span></a><span class='right_span'>33</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('kernel~mm')) document.getElementById('aexp_kernel~mm').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/kernel~net/?opendiv=kernel'>net</a><a href='##' onmousedown=showDiv('kernel~net') id='aexp_kernel~net'><span class='exp_style' id='exp_kernel~net'>[+]</span></a><span class='right_span'>74</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('kernel~net')) document.getElementById('aexp_kernel~net').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/kernel~sched/?opendiv=kernel'>sched</a><a href='##' onmousedown=showDiv('kernel~sched') id='aexp_kernel~sched'><span class='exp_style' id='exp_kernel~sched'>[+]</span></a><span class='right_span'>19</span></li>
</div><script language='javascript' type='text/javascript'>
if (!document.getElementById('kernel')) document.getElementById('aexp_kernel').style.visibility = 'hidden';
if (!document.getElementById('kernel~sched')) document.getElementById('aexp_kernel~sched').style.visibility = 'hidden';
</script>
<li class='catclass'><a href='/blog/cats/android/'>android</a><a href='##' onmousedown=showDiv('android') id='aexp_android'><span class='exp_style' id='exp_android'>[+]</span></a><span class='right_span'>(20)</span></li>
<div id='android' class='catsub'><li><a href='/blog/cats/android~base/?opendiv=android'>base</a><a href='##' onmousedown=showDiv('android~base') id='aexp_android~base'><span class='exp_style' id='exp_android~base'>[+]</span></a><span class='right_span'>11</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('android~base')) document.getElementById('aexp_android~base').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/android~i9507v/?opendiv=android'>i9507v</a><a href='##' onmousedown=showDiv('android~i9507v') id='aexp_android~i9507v'><span class='exp_style' id='exp_android~i9507v'>[+]</span></a><span class='right_span'>1</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('android~i9507v')) document.getElementById('aexp_android~i9507v').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/android~me722/?opendiv=android'>me722</a><a href='##' onmousedown=showDiv('android~me722') id='aexp_android~me722'><span class='exp_style' id='exp_android~me722'>[+]</span></a><span class='right_span'>3</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('android~me722')) document.getElementById('aexp_android~me722').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/android~nx403a/?opendiv=android'>nx403a</a><a href='##' onmousedown=showDiv('android~nx403a') id='aexp_android~nx403a'><span class='exp_style' id='exp_android~nx403a'>[+]</span></a><span class='right_span'>3</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('android~nx403a')) document.getElementById('aexp_android~nx403a').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/android~s5830/?opendiv=android'>s5830</a><a href='##' onmousedown=showDiv('android~s5830') id='aexp_android~s5830'><span class='exp_style' id='exp_android~s5830'>[+]</span></a><span class='right_span'>2</span></li>
</div><script language='javascript' type='text/javascript'>
if (!document.getElementById('android')) document.getElementById('aexp_android').style.visibility = 'hidden';
if (!document.getElementById('android~s5830')) document.getElementById('aexp_android~s5830').style.visibility = 'hidden';
</script>
<li class='catclass'><a href='/blog/cats/debug/'>debug</a><a href='##' onmousedown=showDiv('debug') id='aexp_debug'><span class='exp_style' id='exp_debug'>[+]</span></a><span class='right_span'>(66)</span></li>
<div id='debug' class='catsub'><li><a href='/blog/cats/debug~base/?opendiv=debug'>base</a><a href='##' onmousedown=showDiv('debug~base') id='aexp_debug~base'><span class='exp_style' id='exp_debug~base'>[+]</span></a><span class='right_span'>16</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('debug~base')) document.getElementById('aexp_debug~base').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/debug~dwarf/?opendiv=debug'>dwarf</a><a href='##' onmousedown=showDiv('debug~dwarf') id='aexp_debug~dwarf'><span class='exp_style' id='exp_debug~dwarf'>[+]</span></a><span class='right_span'>4</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('debug~dwarf')) document.getElementById('aexp_debug~dwarf').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/debug~gdb/?opendiv=debug'>gdb</a><a href='##' onmousedown=showDiv('debug~gdb') id='aexp_debug~gdb'><span class='exp_style' id='exp_debug~gdb'>[+]</span></a><span class='right_span'>8</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('debug~gdb')) document.getElementById('aexp_debug~gdb').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/debug~kdump,-crash/?opendiv=debug'>kdump、crash</a><a href='##' onmousedown=showDiv('debug~kdump、crash') id='aexp_debug~kdump、crash'><span class='exp_style' id='exp_debug~kdump、crash'>[+]</span></a><span class='right_span'>9</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('debug~kdump、crash')) document.getElementById('aexp_debug~kdump、crash').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/debug~kgdb/?opendiv=debug'>kgdb</a><a href='##' onmousedown=showDiv('debug~kgdb') id='aexp_debug~kgdb'><span class='exp_style' id='exp_debug~kgdb'>[+]</span></a><span class='right_span'>3</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('debug~kgdb')) document.getElementById('aexp_debug~kgdb').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/debug~kprobe/?opendiv=debug'>kprobe</a><a href='##' onmousedown=showDiv('debug~kprobe') id='aexp_debug~kprobe'><span class='exp_style' id='exp_debug~kprobe'>[+]</span></a><span class='right_span'>4</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('debug~kprobe')) document.getElementById('aexp_debug~kprobe').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/debug~mark/?opendiv=debug'>mark</a><a href='##' onmousedown=showDiv('debug~mark') id='aexp_debug~mark'><span class='exp_style' id='exp_debug~mark'>[+]</span></a><span class='right_span'>16</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('debug~mark')) document.getElementById('aexp_debug~mark').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/debug~perf/?opendiv=debug'>perf</a><a href='##' onmousedown=showDiv('debug~perf') id='aexp_debug~perf'><span class='exp_style' id='exp_debug~perf'>[+]</span></a><span class='right_span'>1</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('debug~perf')) document.getElementById('aexp_debug~perf').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/debug~systemtap/?opendiv=debug'>systemtap</a><a href='##' onmousedown=showDiv('debug~systemtap') id='aexp_debug~systemtap'><span class='exp_style' id='exp_debug~systemtap'>[+]</span></a><span class='right_span'>5</span></li>
</div><script language='javascript' type='text/javascript'>
if (!document.getElementById('debug')) document.getElementById('aexp_debug').style.visibility = 'hidden';
if (!document.getElementById('debug~systemtap')) document.getElementById('aexp_debug~systemtap').style.visibility = 'hidden';
</script>
<li><div style="background:#DDD; height:0.3em;"></div></li><li class='catclass'><a href='/blog/cats/algorithm/'>algorithm</a><a href='##' onmousedown=showDiv('algorithm') id='aexp_algorithm'><span class='exp_style' id='exp_algorithm'>[+]</span></a><span class='right_span'>(26)</span></li>
<div id='algorithm' class='catsub'><li><a href='/blog/cats/algorithm~base/?opendiv=algorithm'>base</a><a href='##' onmousedown=showDiv('algorithm~base') id='aexp_algorithm~base'><span class='exp_style' id='exp_algorithm~base'>[+]</span></a><span class='right_span'>19</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('algorithm~base')) document.getElementById('aexp_algorithm~base').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/algorithm~dp/?opendiv=algorithm'>dp</a><a href='##' onmousedown=showDiv('algorithm~dp') id='aexp_algorithm~dp'><span class='exp_style' id='exp_algorithm~dp'>[+]</span></a><span class='right_span'>1</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('algorithm~dp')) document.getElementById('aexp_algorithm~dp').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/algorithm~ds/?opendiv=algorithm'>ds</a><a href='##' onmousedown=showDiv('algorithm~ds') id='aexp_algorithm~ds'><span class='exp_style' id='exp_algorithm~ds'>[+]</span></a><span class='right_span'>4</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('algorithm~ds')) document.getElementById('aexp_algorithm~ds').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/algorithm~tc/?opendiv=algorithm'>tc</a><a href='##' onmousedown=showDiv('algorithm~tc') id='aexp_algorithm~tc'><span class='exp_style' id='exp_algorithm~tc'>[+]</span></a><span class='right_span'>2</span></li>
</div><script language='javascript' type='text/javascript'>
if (!document.getElementById('algorithm')) document.getElementById('aexp_algorithm').style.visibility = 'hidden';
if (!document.getElementById('algorithm~tc')) document.getElementById('aexp_algorithm~tc').style.visibility = 'hidden';
</script>
<li class='catclass'><a href='/blog/cats/blog/'>blog</a><a href='##' onmousedown=showDiv('blog') id='aexp_blog'><span class='exp_style' id='exp_blog'>[+]</span></a><span class='right_span'>(11)</span></li>
<div id='blog' class='catsub'><li><a href='/blog/cats/blog~hello/?opendiv=blog'>hello</a><a href='##' onmousedown=showDiv('blog~hello') id='aexp_blog~hello'><span class='exp_style' id='exp_blog~hello'>[+]</span></a><span class='right_span'>1</span></li>
<div id='blog~hello' class='catsub2'><li><a href='/blog/cats/blog~hello~hi/?opendiv=blog~hello'>hi</a><span class='right_span'>1</span></li>
</div><script language='javascript' type='text/javascript'>
if (!document.getElementById('blog~hello')) document.getElementById('aexp_blog~hello').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/blog~jekyll/?opendiv=blog'>jekyll</a><a href='##' onmousedown=showDiv('blog~jekyll') id='aexp_blog~jekyll'><span class='exp_style' id='exp_blog~jekyll'>[+]</span></a><span class='right_span'>2</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('blog~jekyll')) document.getElementById('aexp_blog~jekyll').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/blog~markdown/?opendiv=blog'>markdown</a><a href='##' onmousedown=showDiv('blog~markdown') id='aexp_blog~markdown'><span class='exp_style' id='exp_blog~markdown'>[+]</span></a><span class='right_span'>1</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('blog~markdown')) document.getElementById('aexp_blog~markdown').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/blog~octopress/?opendiv=blog'>octopress</a><a href='##' onmousedown=showDiv('blog~octopress') id='aexp_blog~octopress'><span class='exp_style' id='exp_blog~octopress'>[+]</span></a><span class='right_span'>5</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('blog~octopress')) document.getElementById('aexp_blog~octopress').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/blog~ruby/?opendiv=blog'>ruby</a><a href='##' onmousedown=showDiv('blog~ruby') id='aexp_blog~ruby'><span class='exp_style' id='exp_blog~ruby'>[+]</span></a><span class='right_span'>2</span></li>
</div><script language='javascript' type='text/javascript'>
if (!document.getElementById('blog')) document.getElementById('aexp_blog').style.visibility = 'hidden';
if (!document.getElementById('blog~ruby')) document.getElementById('aexp_blog~ruby').style.visibility = 'hidden';
</script>

</ul>
</div>
</body>
</html>
</section>

<section>
<h1>Date Categories</h1>
<head>
</head>
<body>
<div id="menu">
<ul>
<li class='catclass'><a href='/blog/cats/2015/'>2015</a><a href='##' onmousedown=showDiv('2015')><span class='exp_style' id='exp_2015'>[+]</span></a><span class='right_span'>(199)</span></li>
<div id='2015' class='catsub'><li><a href='/blog/cats/2015~11/?opendiv=2015'>2015-11</a><span class='right_span'>5</span></li>
<li><a href='/blog/cats/2015~10/?opendiv=2015'>2015-10</a><span class='right_span'>2</span></li>
<li><a href='/blog/cats/2015~09/?opendiv=2015'>2015-09</a><span class='right_span'>18</span></li>
<li><a href='/blog/cats/2015~08/?opendiv=2015'>2015-08</a><span class='right_span'>25</span></li>
<li><a href='/blog/cats/2015~07/?opendiv=2015'>2015-07</a><span class='right_span'>31</span></li>
<li><a href='/blog/cats/2015~06/?opendiv=2015'>2015-06</a><span class='right_span'>24</span></li>
<li><a href='/blog/cats/2015~05/?opendiv=2015'>2015-05</a><span class='right_span'>22</span></li>
<li><a href='/blog/cats/2015~04/?opendiv=2015'>2015-04</a><span class='right_span'>23</span></li>
<li><a href='/blog/cats/2015~03/?opendiv=2015'>2015-03</a><span class='right_span'>19</span></li>
<li><a href='/blog/cats/2015~02/?opendiv=2015'>2015-02</a><span class='right_span'>11</span></li>
<li><a href='/blog/cats/2015~01/?opendiv=2015'>2015-01</a><span class='right_span'>19</span></li>
</div><li class='catclass'><a href='/blog/cats/2014/'>2014</a><a href='##' onmousedown=showDiv('2014')><span class='exp_style' id='exp_2014'>[+]</span></a><span class='right_span'>(112)</span></li>
<div id='2014' class='catsub'><li><a href='/blog/cats/2014~12/?opendiv=2014'>2014-12</a><span class='right_span'>21</span></li>
<li><a href='/blog/cats/2014~11/?opendiv=2014'>2014-11</a><span class='right_span'>19</span></li>
<li><a href='/blog/cats/2014~10/?opendiv=2014'>2014-10</a><span class='right_span'>13</span></li>
<li><a href='/blog/cats/2014~09/?opendiv=2014'>2014-09</a><span class='right_span'>7</span></li>
<li><a href='/blog/cats/2014~08/?opendiv=2014'>2014-08</a><span class='right_span'>15</span></li>
<li><a href='/blog/cats/2014~07/?opendiv=2014'>2014-07</a><span class='right_span'>2</span></li>
<li><a href='/blog/cats/2014~06/?opendiv=2014'>2014-06</a><span class='right_span'>4</span></li>
<li><a href='/blog/cats/2014~05/?opendiv=2014'>2014-05</a><span class='right_span'>7</span></li>
<li><a href='/blog/cats/2014~04/?opendiv=2014'>2014-04</a><span class='right_span'>9</span></li>
<li><a href='/blog/cats/2014~03/?opendiv=2014'>2014-03</a><span class='right_span'>2</span></li>
<li><a href='/blog/cats/2014~02/?opendiv=2014'>2014-02</a><span class='right_span'>11</span></li>
<li><a href='/blog/cats/2014~01/?opendiv=2014'>2014-01</a><span class='right_span'>2</span></li>
</div><li class='catclass'><a href='/blog/cats/2013/'>2013</a><a href='##' onmousedown=showDiv('2013')><span class='exp_style' id='exp_2013'>[+]</span></a><span class='right_span'>(60)</span></li>
<div id='2013' class='catsub'><li><a href='/blog/cats/2013~12/?opendiv=2013'>2013-12</a><span class='right_span'>5</span></li>
<li><a href='/blog/cats/2013~11/?opendiv=2013'>2013-11</a><span class='right_span'>8</span></li>
<li><a href='/blog/cats/2013~10/?opendiv=2013'>2013-10</a><span class='right_span'>8</span></li>
<li><a href='/blog/cats/2013~09/?opendiv=2013'>2013-09</a><span class='right_span'>5</span></li>
<li><a href='/blog/cats/2013~08/?opendiv=2013'>2013-08</a><span class='right_span'>5</span></li>
<li><a href='/blog/cats/2013~07/?opendiv=2013'>2013-07</a><span class='right_span'>3</span></li>
<li><a href='/blog/cats/2013~06/?opendiv=2013'>2013-06</a><span class='right_span'>9</span></li>
<li><a href='/blog/cats/2013~05/?opendiv=2013'>2013-05</a><span class='right_span'>8</span></li>
<li><a href='/blog/cats/2013~03/?opendiv=2013'>2013-03</a><span class='right_span'>6</span></li>
<li><a href='/blog/cats/2013~02/?opendiv=2013'>2013-02</a><span class='right_span'>2</span></li>
<li><a href='/blog/cats/2013~01/?opendiv=2013'>2013-01</a><span class='right_span'>1</span></li>
</div><li class='catclass'><a href='/blog/cats/2012/'>2012</a><a href='##' onmousedown=showDiv('2012')><span class='exp_style' id='exp_2012'>[+]</span></a><span class='right_span'>(35)</span></li>
<div id='2012' class='catsub'><li><a href='/blog/cats/2012~12/?opendiv=2012'>2012-12</a><span class='right_span'>4</span></li>
<li><a href='/blog/cats/2012~11/?opendiv=2012'>2012-11</a><span class='right_span'>2</span></li>
<li><a href='/blog/cats/2012~10/?opendiv=2012'>2012-10</a><span class='right_span'>4</span></li>
<li><a href='/blog/cats/2012~08/?opendiv=2012'>2012-08</a><span class='right_span'>1</span></li>
<li><a href='/blog/cats/2012~05/?opendiv=2012'>2012-05</a><span class='right_span'>2</span></li>
<li><a href='/blog/cats/2012~04/?opendiv=2012'>2012-04</a><span class='right_span'>9</span></li>
<li><a href='/blog/cats/2012~03/?opendiv=2012'>2012-03</a><span class='right_span'>6</span></li>
<li><a href='/blog/cats/2012~02/?opendiv=2012'>2012-02</a><span class='right_span'>5</span></li>
<li><a href='/blog/cats/2012~01/?opendiv=2012'>2012-01</a><span class='right_span'>2</span></li>
</div><li class='catclass'><a href='/blog/cats/2011/'>2011</a><a href='##' onmousedown=showDiv('2011')><span class='exp_style' id='exp_2011'>[+]</span></a><span class='right_span'>(35)</span></li>
<div id='2011' class='catsub'><li><a href='/blog/cats/2011~12/?opendiv=2011'>2011-12</a><span class='right_span'>8</span></li>
<li><a href='/blog/cats/2011~11/?opendiv=2011'>2011-11</a><span class='right_span'>4</span></li>
<li><a href='/blog/cats/2011~08/?opendiv=2011'>2011-08</a><span class='right_span'>3</span></li>
<li><a href='/blog/cats/2011~07/?opendiv=2011'>2011-07</a><span class='right_span'>3</span></li>
<li><a href='/blog/cats/2011~06/?opendiv=2011'>2011-06</a><span class='right_span'>1</span></li>
<li><a href='/blog/cats/2011~05/?opendiv=2011'>2011-05</a><span class='right_span'>1</span></li>
<li><a href='/blog/cats/2011~04/?opendiv=2011'>2011-04</a><span class='right_span'>1</span></li>
<li><a href='/blog/cats/2011~03/?opendiv=2011'>2011-03</a><span class='right_span'>11</span></li>
<li><a href='/blog/cats/2011~02/?opendiv=2011'>2011-02</a><span class='right_span'>2</span></li>
<li><a href='/blog/cats/2011~01/?opendiv=2011'>2011-01</a><span class='right_span'>1</span></li>
</div><li class='catclass'><a href='/blog/cats/2010/'>2010</a><a href='##' onmousedown=showDiv('2010')><span class='exp_style' id='exp_2010'>[+]</span></a><span class='right_span'>(1)</span></li>
<div id='2010' class='catsub'><li><a href='/blog/cats/2010~07/?opendiv=2010'>2010-07</a><span class='right_span'>1</span></li>
</div><li class='catclass'><a href='/blog/cats/2009/'>2009</a><a href='##' onmousedown=showDiv('2009')><span class='exp_style' id='exp_2009'>[+]</span></a><span class='right_span'>(8)</span></li>
<div id='2009' class='catsub'><li><a href='/blog/cats/2009~12/?opendiv=2009'>2009-12</a><span class='right_span'>1</span></li>
<li><a href='/blog/cats/2009~10/?opendiv=2009'>2009-10</a><span class='right_span'>4</span></li>
<li><a href='/blog/cats/2009~09/?opendiv=2009'>2009-09</a><span class='right_span'>2</span></li>
<li><a href='/blog/cats/2009~07/?opendiv=2009'>2009-07</a><span class='right_span'>1</span></li>
</div>
</ul>
</div>
</body>
</html>
</section>

<section>
<h1>Tags</h1>
<ul class="tag-cloud">
<a style="font-size: 131%" href="/tags/gdb/">gdb(6)</a>
<a style="font-size: 100%" href="/tags/hello/">hello(1)</a>
<a style="font-size: 150%" href="/tags/koj/">koj(18)</a>
<a style="font-size: 112%" href="/tags/nvidia/">nvidia(2)</a>
<a style="font-size: 100%" href="/tags/patch/">patch(1)</a>
<a style="font-size: 100%" href="/tags/reg-exp/">reg_exp(1)</a>

</ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/11/17/kernel-net-ixgbe/">ixgbe</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/11/17/kernel-net-cubic/">cubic</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/11/17/kernel-net-iptables/">iptables</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/11/17/command-curl/">curl命令</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/11/17/command-alias/">alias命令</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub</h1>
  
  <a href="https://github.com/abcdxyzk">abcdxyzk on GitHub</a>
  
</section>

<section>
<h1>Links</h1>
<ul>
	<li>
		<a href=http://hi.baidu.com/abcdxyzk target=_blank>My blog</a>
	</li>
	<li>
		<a href=http://blog.csdn.net/zhangskd target=_blank>zhangsk</a>
	</li>
	<li>
		<a href=http://blog.csdn.net/justlinux2010 target=_blank>justlinux2010</a>
	</li>
	<li>
		<a href=http://simohayha.iteye.com/ target=_blank>simohayha</a>
	</li>
	<li>
		<a href=http://linux.chinaunix.net/techdoc/net/ target=_blank>技术文档</a>
	</li>
	<li>
		<a href=http://blog.csdn.net/cybertan target=_blank>cybertan</a>
	</li>
	<li>
		<a href=http://blog.csdn.net/newnewman80 target=_blank>newnewman80</a>
	</li>
	<li>
		<a href=http://www.cppblog.com/fwxjj/ target=_blank>fwxjj</a>
	</li>
	<li>
		<a href=http://blog.csdn.net/ustc_dylan target=_blank>ustc_dylan</a>
	</li>
	<li>
		<a href=http://blog.csdn.net/nkguohao target=_blank>nkguohao</a>
	</li>
	<li>
		<a href=http://blog.csdn.net/yusiguyuan target=_blank>yusiguyuan</a>
	</li>
	<li>
		<a href=http://www.oenhan.com/ target=_blank>oenhan</a>
	</li>
	<li>
		<a href=http://blog.csdn.net/bullbat target=_blank>bullbat</a>
	</li>
	<li>
		<a href=http://www.wowotech.net/ target=_blank>wowotech</a>
	</li>
	<li>
		<a href=http://www.lenky.info/ target=_blank>lenky</a>
	</li>
	<li>
		<a href=http://smilejay.com/ target=_blank>smilejay</a>
	</li>
	<li>
		<a href=http://blog.chinaunix.net/uid/10167808.html target=_blank>godbach</a>
	</li>
</ul>
</section>

  
<section id="comment_sidebar">
<h1>Recent Comments</h1>

<script type="text/javascript" src="http://abcdxyzk.disqus.com/recent_comments_widget.js?num_items=5&hide_avatars=0&avatar_size=32&excerpt_length=20"></script><a href="http://disqus.com/">Powered by Disqus</a>

</section>


</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - kk -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
  <a title="Top" href="#" id="scroll2top" style="position: fixed; height: 50px; bottom: 30px; right: 25px; cursor: pointer; z-index: 9999; display: block; opacity: 1;"><img src="/images/scrollup.png"></a>
  <script src="/javascripts/scroll2top.js"></script>
  <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1253604690'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s95.cnzz.com/z_stat.php%3Fid%3D1253604690' type='text/javascript'%3E%3C/script%3E"));</script>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'abcdxyzk';
      
</script>





</body>
</html>
