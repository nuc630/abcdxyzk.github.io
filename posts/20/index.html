
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>kk Blog —— 通用基础</title>

  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="kk Blog —— 通用基础" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <script src="/javascripts/category.js" type="text/javascript"></script>

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">kk Blog —— 通用基础</a></h1>
  
    <h2>学习中......</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
<li>
<form action="/search" method="get">
    <input class="search" name="query" id="query" type="text" placeholder="search...">
    <input id="btnSubmit" value="search" type="submit">
</form>
<script type="text/javascript">
var query = GetRequest("query");
if (query != null) {
	document.getElementById("query").value = query;
}
</script>
</li>
  <li><a href="/atom.xml" rel="subscribe-rss">RSS</a></li>
  
</ul>
  
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/download">Download</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h2 class="entry-title"><a href="/blog/2014/12/16/kernel-net-softirq-rx/">收包软中断和netif_rx</a></h2>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-12-16T15:30:00+08:00'><span class='date'>2014-12-16</span> <span class='time'>15:30:00</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h5>初始化报文接收软中断</h5>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>static int __init net_dev_init(void)
</span><span class='line'>{
</span><span class='line'>    ......
</span><span class='line'>    open_softirq(NET_RX_SOFTIRQ, net_rx_action);
</span><span class='line'>    ......
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<h5>报文接收软中断的处理函数net_rx_action详解：</h5>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>static void net_rx_action(struct softirq_action *h)
</span><span class='line'>{
</span><span class='line'>    /*取得本地cpu 的softnet_data 的poll_list  链表*/
</span><span class='line'>    struct list_head *list = &__get_cpu_var(softnet_data).poll_list;
</span><span class='line'>    /*设置软中断处理程序一次允许的最大执行时间为2个jiffies*/
</span><span class='line'>    unsigned long time_limit = jiffies + 2;
</span><span class='line'>　　
</span><span class='line'>    /*设置软中断接收函数一次最多处理的报文个数为 300 */
</span><span class='line'>    int budget = netdev_budget;
</span><span class='line'>    /*关闭本地cpu的中断，下面判断list是否为空时防止硬中断抢占*/
</span><span class='line'>    local_irq_disable();
</span><span class='line'>    /*循环处理pool_list 链表上的等待处理的napi*/
</span><span class='line'>    while (!list_empty(list))
</span><span class='line'>    {
</span><span class='line'>        struct napi_struct *n;
</span><span class='line'>        int work, weight;
</span><span class='line'>                                                                                                                                       
</span><span class='line'>        /*如果处理报文超出一次处理最大的个数
</span><span class='line'>          或允许时间超过最大时间就停止执行，
</span><span class='line'>          跳到softnet_break 处*/
</span><span class='line'>        if (unlikely(budget &lt;= 0 || time_after(jiffies, time_limit)))
</span><span class='line'>        {
</span><span class='line'>            goto softnet_break;
</span><span class='line'>        }
</span><span class='line'>        /*使能本地中断，上面判断list为空已完成，下面调用NAPI
</span><span class='line'>          的轮询函数是在硬中断开启的情况下执行*/
</span><span class='line'>        local_irq_enable();
</span><span class='line'>                                                                                                                                       
</span><span class='line'>        /* 取得softnet_data pool_list 链表上的一个napi,
</span><span class='line'>           即使现在硬中断抢占软中断，会把一个napi挂到pool_list的尾端
</span><span class='line'>           软中断只会从pool_list 头部移除一个pool_list，这样不存在临界区*/
</span><span class='line'>        n = list_entry(list-&gt;next, struct napi_struct, poll_list);
</span><span class='line'>        /*用weighe 记录napi 一次轮询允许处理的最大报文数*/
</span><span class='line'>        weight = n-&gt;weight;
</span><span class='line'>        /* work 记录一个napi总共处理的报文数*/
</span><span class='line'>        work = 0;
</span><span class='line'>　　
</span><span class='line'>        /*如果取得的napi状态是被调度的，就执行napi的轮询处理函数*/
</span><span class='line'>        if (test_bit(NAPI_STATE_SCHED, &n-&gt;state))
</span><span class='line'>        {
</span><span class='line'>            work = n-&gt;poll(n, weight);
</span><span class='line'>        }
</span><span class='line'>        WARN_ON_ONCE(work &gt; weight);
</span><span class='line'>        /*预算减去已经处理的报文数*/
</span><span class='line'>        budget -= work;
</span><span class='line'>        /*禁止本地CPU 的中断，下面会有把没执行完的NAPI挂到softnet_data
</span><span class='line'>          尾部的操作，和硬中断存在临界区。同时while循环时判断list是否
</span><span class='line'>          为空时也要禁止硬中断抢占*/
</span><span class='line'>        local_irq_disable();
</span><span class='line'>　　
</span><span class='line'>        /*如果napi 一次轮询处理的报文数正好等于允许处理的最大数,
</span><span class='line'>          说明一次轮询没处理完全部需要处理的报文*/
</span><span class='line'>        if (unlikely(work == weight))
</span><span class='line'>        {
</span><span class='line'>            /*如果napi已经被禁用，就把napi 从 softnet_data 的pool_list 上移除*/
</span><span class='line'>            if (unlikely(napi_disable_pending(n)))
</span><span class='line'>            {
</span><span class='line'>                local_irq_enable();
</span><span class='line'>                napi_complete(n);
</span><span class='line'>                local_irq_disable();
</span><span class='line'>            }
</span><span class='line'>            else
</span><span class='line'>            {
</span><span class='line'>                /*否则，把napi 移到 pool_list 的尾端*/
</span><span class='line'>                list_move_tail(&n-&gt;poll_list, list);
</span><span class='line'>            }
</span><span class='line'>        }
</span><span class='line'>    }
</span><span class='line'>out:
</span><span class='line'>    local_irq_enable();
</span><span class='line'>    return;
</span><span class='line'>　　
</span><span class='line'>    /*如果处理时间超时，或处理的报文数到了最多允许处理的个数，
</span><span class='line'>      说明还有napi 上有报文需要处理，调度软中断。
</span><span class='line'>      否则，说明这次软中断处理完全部的napi上的需要处理的报文，不再需要
</span><span class='line'>      调度软中断了*/
</span><span class='line'>softnet_break:
</span><span class='line'>    __get_cpu_var(netdev_rx_stat).time_squeeze++;
</span><span class='line'>    __raise_softirq_irqoff(NET_RX_SOFTIRQ);
</span><span class='line'>    goto out;
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<h5>虚拟NAPI backlog 的轮询函数process_backlog（）:</h5>

<p>参数：<br/>
napi : 本地cpu上softnet_data 的backlog .<br/>
quota :  一次轮询可以处理的最多报文数。</p>

<h6>函数详解：</h6>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>static int process_backlog(struct napi_struct *napi, int quota)
</span><span class='line'>{
</span><span class='line'>    int work = 0;
</span><span class='line'>                                         
</span><span class='line'>    /*取得本地CPU上的softnet_data  数据*/
</span><span class='line'>    struct softnet_data *queue = &__get_cpu_var(softnet_data);
</span><span class='line'>　　
</span><span class='line'>    /*开始计时，一旦允许时间到，就退出轮询*/
</span><span class='line'>    unsigned long start_time = jiffies;
</span><span class='line'>    napi-&gt;weight = weight_p;
</span><span class='line'>　　
</span><span class='line'>    /*循环从softnet_data 的输入队列取报文并处理，直到队列中没有报文了,
</span><span class='line'>     或处理的报文数大于了允许的上限值了，
</span><span class='line'>     或轮询函数执行时间大于一个jiffies 了
</span><span class='line'>　　*/
</span><span class='line'>    do
</span><span class='line'>    {
</span><span class='line'>        struct sk_buff *skb;
</span><span class='line'>        /*禁用本地中断，要存队列中取skb,防止抢占*/
</span><span class='line'>        local_irq_disable();
</span><span class='line'>　　
</span><span class='line'>        /*从softnet_data 的输入队列中取得一个skb*/
</span><span class='line'>        skb = __skb_dequeue(&queue-&gt;input_pkt_queue);
</span><span class='line'>　　
</span><span class='line'>        /*如果队列中没有skb,则使能中断并退出轮询*/
</span><span class='line'>        if (!skb)
</span><span class='line'>        {
</span><span class='line'>            /*把napi 从 softnet_data 的 pool_list 链表上摘除*/
</span><span class='line'>            __napi_complete(napi);
</span><span class='line'>            /*使能本地CPU的中断*/
</span><span class='line'>            local_irq_enable();
</span><span class='line'>            break;
</span><span class='line'>        }
</span><span class='line'>        /*skb 已经摘下来了，使能中断*/
</span><span class='line'>        local_irq_enable();
</span><span class='line'>　　
</span><span class='line'>        /*把skb送到协议栈相关协议模块进行处理,详细处理见后续章节*/
</span><span class='line'>        netif_receive_skb(skb);
</span><span class='line'>    } while (++work &lt; quota && jiffies == start_time);
</span><span class='line'>    /*返回处理报文个数*/
</span><span class='line'>    return work;
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<h5>linux旧的收包方式提供给驱动的接口netif_rx():</h5>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>int netif_rx(struct sk_buff *skb)
</span><span class='line'>{
</span><span class='line'>    struct softnet_data *queue;
</span><span class='line'>    unsigned long flags;
</span><span class='line'>　
</span><span class='line'>    /*如果接收skb的时间戳没设定，设定接收时间戳*/
</span><span class='line'>    if (!skb-&gt;tstamp.tv64)
</span><span class='line'>    {
</span><span class='line'>        net_timestamp(skb);
</span><span class='line'>    }
</span><span class='line'>　　
</span><span class='line'>    /*禁止本地cpu的中断*/
</span><span class='line'>    local_irq_save(flags);
</span><span class='line'>　　
</span><span class='line'>    /*取得本地cpu的softnet_data*/
</span><span class='line'>    queue = &__get_cpu_var(softnet_data);
</span><span class='line'>                   
</span><span class='line'>    /*每个CPU都有一个统计数据，增加统计数据*/
</span><span class='line'>    __get_cpu_var(netdev_rx_stat).total++;
</span><span class='line'>　　
</span><span class='line'>    /*如果本地CPU的输入队列中的skb 个数小于允许的最多的个数*/
</span><span class='line'>    if (queue-&gt;input_pkt_queue.qlen &lt;= netdev_max_backlog)
</span><span class='line'>    {
</span><span class='line'>        /*如果本地cpu的输入队列长度不为0,表示输入队列已经有skb了，
</span><span class='line'>        并且特殊的napi backlog 已经挂入了softnet_data  的
</span><span class='line'>        pool_list上了*/
</span><span class='line'>        if (queue-&gt;input_pkt_queue.qlen)
</span><span class='line'>        {
</span><span class='line'>enqueue:
</span><span class='line'>            /*把skb 放入CPU的输入队列 input_pkt_queue*/
</span><span class='line'>            __skb_queue_tail(&queue-&gt;input_pkt_queue, skb);
</span><span class='line'>                      
</span><span class='line'>            /*使能中断 并 返回*/
</span><span class='line'>            local_irq_restore(flags);
</span><span class='line'>            return NET_RX_SUCCESS;
</span><span class='line'>        }
</span><span class='line'>        /*如果输入队列为空，则把 特殊的napi backlog 挂到softnet_data
</span><span class='line'>        的 pool_list 上 并返回把skb放入输入队列并返回*/
</span><span class='line'>        napi_schedule(&queue-&gt;backlog);
</span><span class='line'>        goto enqueue;
</span><span class='line'>    }
</span><span class='line'>    /*如果本地cpu的输入队列已经满了，则丢弃报文，
</span><span class='line'>      并增加丢包计数并返回*/
</span><span class='line'>    __get_cpu_var(netdev_rx_stat).dropped++;
</span><span class='line'>    local_irq_restore(flags);
</span><span class='line'>　　
</span><span class='line'>    kfree_skb(skb);
</span><span class='line'>    return NET_RX_DROP;
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h2 class="entry-title"><a href="/blog/2014/12/14/blog-ruby-string/">ruby字符串处理函数</a></h2>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-12-14T15:15:00+08:00'><span class='date'>2014-12-14</span> <span class='time'>15:15:00</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h5>1.返回字符串的长度</h5>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>str.length =&gt; integer</span></code></pre></td></tr></table></div></figure>


<h5>2.字符串索引index</h5>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>str.index(substring [, offset])   =&gt; fixnum or nil
</span><span class='line'>str.index(fixnum [, offset])      =&gt; fixnum or nil
</span><span class='line'>str.index(regexp [, offset])      =&gt; fixnum or nil
</span><span class='line'>
</span><span class='line'>Returns the index of the first occurrence of the given substring, character (fixnum), 
</span><span class='line'>or pattern (regexp) in str. Returns nil if not found. If the second parameter is present, 
</span><span class='line'>it specifies the position in the string to begin the search.
</span><span class='line'>
</span><span class='line'>   "hello".index('e')             #=&gt; 1
</span><span class='line'>   "hello".index('lo')            #=&gt; 3
</span><span class='line'>   "hello".index('a')             #=&gt; nil
</span><span class='line'>   "hello".index(101)             #=&gt; 1
</span><span class='line'>   "hello".index(/[aeiou]/, -3)   #=&gt; 4</span></code></pre></td></tr></table></div></figure>


<h6>从尾到头rindex</h6>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>str.rindex(substring [, fixnum])   =&gt; fixnum or nil
</span><span class='line'>str.rindex(fixnum [, fixnum])   =&gt; fixnum or nil
</span><span class='line'>str.rindex(regexp [, fixnum])   =&gt; fixnum or nil
</span><span class='line'>
</span><span class='line'>Returns the index of the last occurrence of the given substring, character (fixnum), 
</span><span class='line'>or pattern (regexp) in str. Returns nil if not found. If the second parameter is present, 
</span><span class='line'>it specifies the position in the string to end the search---characters beyond this point will not be considered.
</span><span class='line'>
</span><span class='line'>   "hello".rindex('e')             #=&gt; 1
</span><span class='line'>   "hello".rindex('l')             #=&gt; 3
</span><span class='line'>   "hello".rindex('a')             #=&gt; nil
</span><span class='line'>   "hello".rindex(101)             #=&gt; 1
</span><span class='line'>   "hello".rindex(/[aeiou]/, -2)   #=&gt; 1</span></code></pre></td></tr></table></div></figure>


<h5>3.判断字符串中是否包含另一个串</h5>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>str.include? other_str =&gt; true or false
</span><span class='line'>"hello".include? "lo"   #=&gt; true
</span><span class='line'>"hello".include? "ol"   #=&gt; false
</span><span class='line'>"hello".include? ?h     #=&gt; true</span></code></pre></td></tr></table></div></figure>


<h5>4.字符串插入</h5>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>str.insert(index, other_str) =&gt; str
</span><span class='line'>"abcd".insert(0, 'X')    #=&gt; "Xabcd"
</span><span class='line'>"abcd".insert(3, 'X')    #=&gt; "abcXd"
</span><span class='line'>"abcd".insert(4, 'X')    #=&gt; "abcdX"
</span><span class='line'>"abcd".insert(-3, 'X')
</span><span class='line'>-3, 'X')   #=&gt; "abXcd"
</span><span class='line'>"abcd".insert(-1, 'X')   #=&gt; "abcdX"</span></code></pre></td></tr></table></div></figure>


<h5>5.字符串分隔,默认分隔符为空格</h5>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>str.split(pattern=$;, [limit]) =&gt; anArray
</span><span class='line'>" now's the time".split        #=&gt; ["now's", "the", "time"]
</span><span class='line'>"1, 2.34,56, 7".split(%r{,\s*}) #=&gt; ["1", "2.34", "56", "7"]
</span><span class='line'>"hello".split(//)               #=&gt; ["h", "e", "l", "l", "o"]
</span><span class='line'>"hello".split(//, 3)            #=&gt; ["h", "e", "llo"]
</span><span class='line'>"hi mom".split(%r{\s*})         #=&gt; ["h", "i", "m", "o", "m"]
</span><span class='line'>"mellow yellow".split("ello")   #=&gt; ["m", "w y", "w"]
</span><span class='line'>"1,2,,3,4,,".split(',')         #=&gt; ["1", "2", "", "3", "4"]
</span><span class='line'>"1,2,,3,4,,".split(',', 4)      #=&gt; ["1", "2", "", "3,4,,"]</span></code></pre></td></tr></table></div></figure>


<h5>6.字符串替换</h5>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>str.gsub(pattern, replacement) =&gt; new_str
</span><span class='line'>str.gsub(pattern) {|match| block } =&gt; new_str
</span><span class='line'>"hello".gsub(/[aeiou]/, '*')              #=&gt; "h*ll*"     #将元音替换成*号
</span><span class='line'>"hello".gsub(/([aeiou])/, '&lt;\1&gt;')         #=&gt; "h&lt;e&gt;ll&lt;o&gt;"   #将元音加上尖括号,\1表示保留原有字符???
</span><span class='line'>"hello".gsub(/./) {|s| s[0].to_s + ' '}   #=&gt; "104 101 108 108 111 "</span></code></pre></td></tr></table></div></figure>


<p>ruby中带“!&ldquo;和不带&rdquo;!&ldquo;的方法的最大的区别就是带”!"的会改变调用对象本身了。比方说str.gsub(/a/, &lsquo;b&rsquo;)，不会改变str本身，只会返回一个新的str。而str.gsub!(/a/, &lsquo;b&rsquo;)就会把str本身给改了。<br/>
但是gsub和gsub!还有另外一个不同点就是，gsub不管怎么样都会返回一个新的字符串，而gsub!只有在有字符被替换的情况下才会返回一个新的字符串，假如说没有任何字符被替换，gsub!只会返回nil.</p>

<h6>字符串替换二:</h6>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>str.replace(other_str) =&gt; str
</span><span class='line'>s = "hello"         #=&gt; "hello"
</span><span class='line'>s.replace "world"   #=&gt; "world"</span></code></pre></td></tr></table></div></figure>


<h5>7.字符串删除:</h5>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>str.delete([other_str]+) =&gt; new_str
</span><span class='line'>"hello".delete "l","lo"        #=&gt; "heo"
</span><span class='line'>"hello".delete "lo"            #=&gt; "he"
</span><span class='line'>"hello".delete "aeiou", "^e"   #=&gt; "hell"
</span><span class='line'>"hello".delete "ej-m"          #=&gt; "ho"</span></code></pre></td></tr></table></div></figure>


<h5>8.去掉前和后的空格</h5>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>str.lstrip =&gt; new_str
</span><span class='line'>" hello ".lstrip   #=&gt; "hello "
</span><span class='line'>"hello".lstrip       #=&gt; "hello"</span></code></pre></td></tr></table></div></figure>


<h5>9.字符串匹配</h5>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>str.match(pattern) =&gt; matchdata or nil</span></code></pre></td></tr></table></div></figure>


<h5>10.字符串反转</h5>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>str.reverse =&gt; new_str
</span><span class='line'>"stressed".reverse   #=&gt; "desserts"</span></code></pre></td></tr></table></div></figure>


<h5>11.去掉重复的字符</h5>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>str.squeeze([other_str]*) =&gt; new_str
</span><span class='line'>"yellow moon".squeeze                  #=&gt; "yelow mon" #默认去掉串中所有重复的字符
</span><span class='line'>" now   is the".squeeze(" ")         #=&gt; " now is the" #去掉串中重复的空格
</span><span class='line'>"putters shoot balls".squeeze("m-z")   #=&gt; "puters shot balls" #去掉指定范围内的重复字符</span></code></pre></td></tr></table></div></figure>


<h5>12.转化成数字</h5>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>str.to_i=&gt; str
</span><span class='line'>"12345".to_i             #=&gt; 12345</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h2 class="entry-title"><a href="/blog/2014/12/14/blog-ruby-base/">ruby基础</a></h2>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-12-14T14:55:00+08:00'><span class='date'>2014-12-14</span> <span class='time'>14:55:00</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h4>Find</h4>

<p><a href="http://ruby-doc.org/stdlib-1.9.3/libdoc/find/rdoc/Find.html">http://ruby-doc.org/stdlib-1.9.3/libdoc/find/rdoc/Find.html</a></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>require 'find'
</span><span class='line'>total_size = 0
</span><span class='line'>Find.find(ENV["HOME"]) do |path|
</span><span class='line'>  if FileTest.directory?(path)
</span><span class='line'>    if File.basename(path)[0] == ?.
</span><span class='line'>      Find.prune       # Don't look any further into this directory.
</span><span class='line'>    else
</span><span class='line'>      next
</span><span class='line'>    end
</span><span class='line'>  else
</span><span class='line'>    total_size += FileTest.size(path)
</span><span class='line'>  end
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>


<h4>Time</h4>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>p Time.parse(“2002-03-17”)       #=&gt; Sun Mar 17 00:00:00 +0800[v2] 2002
</span><span class='line'>p Time.now        # =&gt;Mon Oct 20 06:02:10 JST 2003
</span><span class='line'>p Time.now.to_a      # =&gt; [10, 2, 6, 20, 10, 2003, 1, 293,false, "JST"]
</span><span class='line'>p Time.now.to_f      # =&gt; 1418540681.0154862</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h2 class="entry-title"><a href="/blog/2014/12/14/blog-jekyll-liquid/">liquid用法笔记</a></h2>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-12-14T14:54:00+08:00'><span class='date'>2014-12-14</span> <span class='time'>14:54:00</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://blog.csdn.net/dont27/article/details/38097581">原文</a></p>

<ul>
<li>注意本文代码中的 <code>{ {</code>,<code>{ %</code>,<code>% }</code>,<code>} }</code>,<code>{ { {</code>,<code>} } }</code> 中间的空格都要去掉才能执行</li>
</ul>


<p>在折腾github上博客的时候, 遇到一些jekyll, 正确来说应该是Liquid用法的问题。
于是一系列搜索之后终于找到了比较容易理解的<a href="https://github.com/Shopify/liquid/wiki/Liquid-for-Designers">文档>></a></p>

<p>关于Liquid的语法使用，看完一遍，就能愉快的在github上继续折腾博客了。有些看不大懂，没翻译，都是自己的见解，有些根本用不上就不解释了。</p>

<h5>Liquid有两种标记类型： Output 和 Tag.</h5>

<p>  Output标记，用于输出文本，格式采用 <code>{ { 两个尖括号包围 } }</code><br/>
  Tag标记，用于执行命令或者处理 格式: <code>{ % 一对尖括号内一对百分号 % }</code></p>

<p>我的见解是: 类比jsp格式, Output相当于 &lt;%=variable>，即输出变量值;<br/>
Tag相当于&lt;% int i=2 ;%>,一种数据处理,但不做输出效果.</p>

<h4>Output</h4>

<p>例子:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Hello { {name} }
</span><span class='line'>Hello { {user.name} }
</span><span class='line'>Hello { { 'tobi' } }</span></code></pre></td></tr></table></div></figure>


<h5>高级Output: Filters//过滤器</h5>

<p>Filters过滤器,数据处理的操作方法.<br/>
过滤器的第一个参数，往往是过滤器运算符'|&lsquo;左边的Output，而过滤器的返回值，是通过过滤运算符右边的操作所得到的，过滤器可以叠加操作，最终得到该Output所要输出的值。(这段我见解，翻译不过来 = =)<br/>
如下：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Hello { { 'tobi' | upcase } }
</span><span class='line'>Hello tobi has { { 'tobi' | size } } letters!
</span><span class='line'>Hello { { 'now' | date: "%Y %h" } }</span></code></pre></td></tr></table></div></figure>


<h5>标准过滤器</h5>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>date - 格式化时间
</span><span class='line'>capitalize - 输出字符串，字符串（句子）首字母大写 e.g. 假设tb为"hello world"{ { tb|capitalize } } #=&gt; 'Hello world'
</span><span class='line'>downcase - 转换小写
</span><span class='line'>upcase - 转换大写
</span><span class='line'>first - 获取数组的第一个元素
</span><span class='line'>last - 获取数组的最后一个元素
</span><span class='line'>join - 用指定的字符拼接数组元素
</span><span class='line'>sort - 排序数组
</span><span class='line'>map - map/collect an array on a given property
</span><span class='line'>size - 返回数组大小
</span><span class='line'>escape - 转移字符串
</span><span class='line'>escape_once - returns an escaped version of html without affecting existing escaped entities
</span><span class='line'>strip_html - 除去字符串中的html标签?
</span><span class='line'>strip_newlines - 除去字符串中的回车?
</span><span class='line'>newline_to_br - 将所有的回车"\n" 转换成"&lt;br /&gt;"?
</span><span class='line'>replace - 替换所有匹配内容 e.g.{ { 'forfor' | replace:'for', 'bar' } } #=&gt; 'barbar'
</span><span class='line'>replace_first - 替换第一个匹配内容 e.g.{ { 'forfor' | replace_first:'for', 'bar' } } #=&gt; 'barfor'
</span><span class='line'>remove - 移除所有匹配内容 e.g.{ { 'forbarforbar' | remove:'for'} } #=&gt; 'barbar'
</span><span class='line'>remove_first - 移除第一个匹配内容 e.g.{ { 'forbarforbar' | remove_first:'for'} } #=&gt; 'barforbar'
</span><span class='line'>truncate - truncate a string down to x characters
</span><span class='line'>truncatewords - truncate a string down to x words
</span><span class='line'>prepend - 在字符串前面加上内容 e.g.{ {'bar'|prepend:'far'} } #=&gt; 'farbar'
</span><span class='line'>append - 字符串后面加上内容 e.g.{ {'bar'|append: 'foo'} }#=&gt; 'barfoo'
</span><span class='line'>minus - 减法 e.g. { {4|minus:2} } #=&gt;2
</span><span class='line'>plus - 加法 e.g. { { 4|plus:2} } #=&gt; 6
</span><span class='line'>times - 乘法 e.g. { {10|times:2} } #=&gt; 20
</span><span class='line'>divided_by - 除法 e.g. { { 10 | divided_by:2} } #=&gt; 5
</span><span class='line'>split - 分割字符串 e.g.{ { "a~b" | split:'~'} } #=&gt; ['a','b']
</span><span class='line'>modulo - 取余 e.g. { { 3 | modulo:2 } } #=&gt; 1</span></code></pre></td></tr></table></div></figure>


<h4>Tags</h4>

<p>Tag在模板中起到处理逻辑的作用。<br/>
下面是目前支持的Tag:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>assign - 定义变量 e.g. { % assign tt = 1 % } 定义了变量tt数值为1
</span><span class='line'>capture - Block tag为变量赋值 e.g.{ % capture dont % }{ { tt } }{ % endcapture % } 将tt的值赋给 dont
</span><span class='line'>case - Block tag its the standard case...when block
</span><span class='line'>comment - Block tag 注释
</span><span class='line'>cycle - Cycle is usually used within a loop to alternate between values, like colors or DOM classes.
</span><span class='line'>for - for循环block
</span><span class='line'>if - 判断block
</span><span class='line'>include - 引入模板
</span><span class='line'>raw - 转义内容tag e.g.{ % raw % }{ { this } }{ % endraw% } #=&gt; '{ { this } }'
</span><span class='line'>unless - Mirror of if statement</span></code></pre></td></tr></table></div></figure>


<h5>Comments</h5>

<p>注释隐藏</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>We made 1 million dollars { % comment % } in losses { % endcomment % } this year
</span><span class='line'>Raw</span></code></pre></td></tr></table></div></figure>


<p>当包裹内容出现冲突语法时，不会执行其处理。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>{ % raw % }
</span><span class='line'>  In Handlebars, { { this } } will be HTML-escaped, but { { { that } } } will not.
</span><span class='line'>{ % endraw % }</span></code></pre></td></tr></table></div></figure>


<h5>if/else</h5>

<p>e.g.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>{ % if user % }
</span><span class='line'>  Hello { { user.name } }
</span><span class='line'>{ % endif % }</span></code></pre></td></tr></table></div></figure>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># Same as above
</span><span class='line'>{ % if user != null % }
</span><span class='line'>  Hello { { user.name } }
</span><span class='line'>{ % endif % }</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>{ % if user.name != 'tobi' % }
</span><span class='line'>  Hello non-tobi
</span><span class='line'>{ % endif % }</span></code></pre></td></tr></table></div></figure>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># Same as above
</span><span class='line'>{ % unless user.name == 'tobi' % }
</span><span class='line'>  Hello non-tobi
</span><span class='line'>{ % endunless % }</span></code></pre></td></tr></table></div></figure>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>{ % if user.payments.size &gt; 0  % }
</span><span class='line'>   you paid !
</span><span class='line'>{ % endif % }</span></code></pre></td></tr></table></div></figure>


<h5>Case Statement</h5>

<p>多条件</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>{ % case condition % }
</span><span class='line'>{ % when 1 % }
</span><span class='line'>hit 1
</span><span class='line'>{ % when 2 or 3 % }
</span><span class='line'>hit 2 or 3
</span><span class='line'>{ % else % }
</span><span class='line'>... else ...
</span><span class='line'>{ % endcase % }</span></code></pre></td></tr></table></div></figure>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>{ % case template % }
</span><span class='line'>
</span><span class='line'>{ % when 'label' % }
</span><span class='line'>     // { { label.title } }
</span><span class='line'>{ % when 'product' % }
</span><span class='line'>     // { { product.vendor | link_to_vendor } } / { { product.title } }
</span><span class='line'>{ % else % }
</span><span class='line'>     // { {page_title} }
</span><span class='line'>{ % endcase % }</span></code></pre></td></tr></table></div></figure>


<h5>Cycle</h5>

<p>循环列举</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>{ % cycle 'one', 'two', 'three' % }
</span><span class='line'>{ % cycle 'one', 'two', 'three' % }
</span><span class='line'>{ % cycle 'one', 'two', 'three' % }
</span><span class='line'>{ % cycle 'one', 'two', 'three' % }</span></code></pre></td></tr></table></div></figure>


<p>结果：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>one
</span><span class='line'>two
</span><span class='line'>three
</span><span class='line'>one</span></code></pre></td></tr></table></div></figure>


<p>可以通过命名分组：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>{ % cycle 'group 1': 'one', 'two', 'three' % }
</span><span class='line'>{ % cycle 'group 1': 'one', 'two', 'three' % }
</span><span class='line'>{ % cycle 'group 2': 'one', 'two', 'three' % }
</span><span class='line'>{ % cycle 'group 2': 'one', 'two', 'three' % }</span></code></pre></td></tr></table></div></figure>


<p>结果：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>one
</span><span class='line'>two
</span><span class='line'>one
</span><span class='line'>two</span></code></pre></td></tr></table></div></figure>


<h5>for 循环</h5>

<p>循环集合：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>{ % for item in array % }
</span><span class='line'>  { { item } }
</span><span class='line'>{ % endfor % }</span></code></pre></td></tr></table></div></figure>


<p>遍历hash时：item[0]包含键，item[1]包含值</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>{ % for item in hash % }
</span><span class='line'>  { { item[0] } }: { { item[1] } }
</span><span class='line'>{ % endfor % }</span></code></pre></td></tr></table></div></figure>


<p>for循环时，下列变量可以辅助使用：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>forloop.length      # =&gt; length of the entire for loop
</span><span class='line'>forloop.index       # =&gt; index of the current iteration
</span><span class='line'>forloop.index0      # =&gt; index of the current iteration (zero based)
</span><span class='line'>forloop.rindex      # =&gt; how many items are still left?
</span><span class='line'>forloop.rindex0     # =&gt; how many items are still left? (zero based)
</span><span class='line'>forloop.first       # =&gt; is this the first iteration?
</span><span class='line'>forloop.last        # =&gt; is this the last iteration?</span></code></pre></td></tr></table></div></figure>


<p>还有一些变量可以用来处理循环时选择性处理：<br/>
limit:int - 限制遍历个数<br/>
offset:int - 从第n个数开始遍历</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># array = [1,2,3,4,5,6]
</span><span class='line'>{ % for item in array limit:2 offset:2 % }
</span><span class='line'>  { { item } }
</span><span class='line'>{ % endfor % }
</span><span class='line'># results in 3,4</span></code></pre></td></tr></table></div></figure>


<p>反序遍历：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>{ % for item in collection reversed % } 
</span><span class='line'>{ {item} } 
</span><span class='line'>{ % endfor % }</span></code></pre></td></tr></table></div></figure>


<p>除了遍历集合，还可以定义一个范围的数字来遍历：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># if item.quantity is 4...
</span><span class='line'>{ % for i in (1..item.quantity) % }
</span><span class='line'>  { { i } }
</span><span class='line'>{ % endfor % }
</span><span class='line'># results in 1,2,3,4</span></code></pre></td></tr></table></div></figure>


<h5>变量赋值</h5>

<p>赋值变量：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>{ % assign name = 'freestyle' % }
</span><span class='line'>
</span><span class='line'>{ % for t in collections.tags % }{ % if t == name % }
</span><span class='line'>  &lt;p&gt;Freestyle!&lt;/p&gt;
</span><span class='line'>{ % endif % }{ % endfor % }</span></code></pre></td></tr></table></div></figure>


<p>还可以赋值布尔值：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>{ % assign freestyle = false % }
</span><span class='line'>
</span><span class='line'>{ % for t in collections.tags % }{ % if t == 'freestyle' % }
</span><span class='line'>  { % assign freestyle = true % }
</span><span class='line'>{ % endif % }{ % endfor % }
</span><span class='line'>
</span><span class='line'>{ % if freestyle % }
</span><span class='line'>  &lt;p&gt;Freestyle!&lt;/p&gt;
</span><span class='line'>{ % endif % }</span></code></pre></td></tr></table></div></figure>


<p>赋值处理过的数据：可以用capture</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>{ % capture attribute_name % }{ { item.title | handleize } }-{ { i } }-color{ % endcapture % }
</span><span class='line'>
</span><span class='line'>  &lt;label for="{ { attribute_name } }"&gt;Color:&lt;/label&gt;
</span><span class='line'>  &lt;select name="attributes[{ { attribute_name } }]" id="{ { attribute_name } }"&gt;
</span><span class='line'>    &lt;option value="red"&gt;Red&lt;/option&gt;
</span><span class='line'>    &lt;option value="green"&gt;Green&lt;/option&gt;
</span><span class='line'>    &lt;option value="blue"&gt;Blue&lt;/option&gt;
</span><span class='line'>  &lt;/select&gt;</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h2 class="entry-title"><a href="/blog/2014/12/05/android-monitor/">Android模拟器</a></h2>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-12-05T17:38:00+08:00'><span class='date'>2014-12-05</span> <span class='time'>17:38:00</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>首先下载Android SDK ，完成安装openjdk-6-jre，还需要安装ia32-libs bison flex libglu1-mesa-dev 。<br/>
将下载回来的Android SDK解压缩后进入文件夹，运行tools/monitor<br/>
Window->Android SDK Manager 选择想要的模拟的android安转<br/>
Window->Android Virtual Device Manager 模拟器管理界面。</p>

<p>下载不了sdk就 <a href="https://awk.so/#newwindow=1&amp;q=dl-ssl.google.com+ip  ">https://awk.so/#newwindow=1&amp;q=dl-ssl.google.com+ip  </a>
搜索dl-ssl.google.com的IP，然后在hosts替换掉。如 203.208.46.200</p>

<h5>安装apk</h5>

<p>在电脑上运行 adb install /XXX/YYY.apk</p>

<p><a href="http://forum.ubuntu.org.cn/viewtopic.php?t=311659">android虚拟机QQ</a></p>

<p><a href="http://www.findspace.name/easycoding/415">http://www.findspace.name/easycoding/415</a></p>

<h5>中文输入法</h5>

<p>要到设置->语言和输入法中勾选选择输入，再点击输入法靠右的地方进行设置。</p>

<p><a href="http://segmentfault.com/blog/cherishsir/1190000000686224">ubuntu下,使用chrome 浏览器运行安卓apk程序</a></p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/21">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/19">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
<h1>Categories</h1>
<head>
</head>
<body>
<div id="menu">
<ul>
<li class='catclass'><a href='/blog/cats/language/'>language</a><a href='##' onmousedown=showDiv('language') id='aexp_language'><span class='exp_style' id='exp_language'>[+]</span></a><span class='right_span'>(38)</span></li>
<div id='language' class='catsub'><li><a href='/blog/cats/language~c/?opendiv=language'>c</a><a href='##' onmousedown=showDiv('language~c') id='aexp_language~c'><span class='exp_style' id='exp_language~c'>[+]</span></a><span class='right_span'>21</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('language~c')) document.getElementById('aexp_language~c').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/language~java/?opendiv=language'>java</a><a href='##' onmousedown=showDiv('language~java') id='aexp_language~java'><span class='exp_style' id='exp_language~java'>[+]</span></a><span class='right_span'>11</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('language~java')) document.getElementById('aexp_language~java').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/language~web/?opendiv=language'>web</a><a href='##' onmousedown=showDiv('language~web') id='aexp_language~web'><span class='exp_style' id='exp_language~web'>[+]</span></a><span class='right_span'>6</span></li>
</div><script language='javascript' type='text/javascript'>
if (!document.getElementById('language')) document.getElementById('aexp_language').style.visibility = 'hidden';
if (!document.getElementById('language~web')) document.getElementById('aexp_language~web').style.visibility = 'hidden';
</script>
<li class='catclass'><a href='/blog/cats/compiler/'>compiler</a><a href='##' onmousedown=showDiv('compiler') id='aexp_compiler'><span class='exp_style' id='exp_compiler'>[+]</span></a><span class='right_span'>(14)</span></li>
<div id='compiler' class='catsub'><li><a href='/blog/cats/compiler~base/?opendiv=compiler'>base</a><a href='##' onmousedown=showDiv('compiler~base') id='aexp_compiler~base'><span class='exp_style' id='exp_compiler~base'>[+]</span></a><span class='right_span'>10</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('compiler~base')) document.getElementById('aexp_compiler~base').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/compiler~make/?opendiv=compiler'>make</a><a href='##' onmousedown=showDiv('compiler~make') id='aexp_compiler~make'><span class='exp_style' id='exp_compiler~make'>[+]</span></a><span class='right_span'>4</span></li>
</div><script language='javascript' type='text/javascript'>
if (!document.getElementById('compiler')) document.getElementById('aexp_compiler').style.visibility = 'hidden';
if (!document.getElementById('compiler~make')) document.getElementById('aexp_compiler~make').style.visibility = 'hidden';
</script>
<li class='catclass'><a href='/blog/cats/assembly/'>assembly</a><a href='##' onmousedown=showDiv('assembly') id='aexp_assembly'><span class='exp_style' id='exp_assembly'>[+]</span></a><span class='right_span'>(14)</span></li>
<div id='assembly' class='catsub'><li><a href='/blog/cats/assembly~arm/?opendiv=assembly'>arm</a><a href='##' onmousedown=showDiv('assembly~arm') id='aexp_assembly~arm'><span class='exp_style' id='exp_assembly~arm'>[+]</span></a><span class='right_span'>2</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('assembly~arm')) document.getElementById('aexp_assembly~arm').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/assembly~base/?opendiv=assembly'>base</a><a href='##' onmousedown=showDiv('assembly~base') id='aexp_assembly~base'><span class='exp_style' id='exp_assembly~base'>[+]</span></a><span class='right_span'>12</span></li>
</div><script language='javascript' type='text/javascript'>
if (!document.getElementById('assembly')) document.getElementById('aexp_assembly').style.visibility = 'hidden';
if (!document.getElementById('assembly~base')) document.getElementById('aexp_assembly~base').style.visibility = 'hidden';
</script>
<li class='catclass'><a href='/blog/cats/tools/'>tools</a><a href='##' onmousedown=showDiv('tools') id='aexp_tools'><span class='exp_style' id='exp_tools'>[+]</span></a><span class='right_span'>(38)</span></li>
<div id='tools' class='catsub'><li><a href='/blog/cats/tools~base/?opendiv=tools'>base</a><a href='##' onmousedown=showDiv('tools~base') id='aexp_tools~base'><span class='exp_style' id='exp_tools~base'>[+]</span></a><span class='right_span'>13</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('tools~base')) document.getElementById('aexp_tools~base').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/tools~ci/?opendiv=tools'>ci</a><a href='##' onmousedown=showDiv('tools~ci') id='aexp_tools~ci'><span class='exp_style' id='exp_tools~ci'>[+]</span></a><span class='right_span'>3</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('tools~ci')) document.getElementById('aexp_tools~ci').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/tools~command/?opendiv=tools'>command</a><a href='##' onmousedown=showDiv('tools~command') id='aexp_tools~command'><span class='exp_style' id='exp_tools~command'>[+]</span></a><span class='right_span'>7</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('tools~command')) document.getElementById('aexp_tools~command').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/tools~git/?opendiv=tools'>git</a><a href='##' onmousedown=showDiv('tools~git') id='aexp_tools~git'><span class='exp_style' id='exp_tools~git'>[+]</span></a><span class='right_span'>6</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('tools~git')) document.getElementById('aexp_tools~git').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/tools~mysql/?opendiv=tools'>mysql</a><a href='##' onmousedown=showDiv('tools~mysql') id='aexp_tools~mysql'><span class='exp_style' id='exp_tools~mysql'>[+]</span></a><span class='right_span'>6</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('tools~mysql')) document.getElementById('aexp_tools~mysql').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/tools~ssh/?opendiv=tools'>ssh</a><a href='##' onmousedown=showDiv('tools~ssh') id='aexp_tools~ssh'><span class='exp_style' id='exp_tools~ssh'>[+]</span></a><span class='right_span'>3</span></li>
</div><script language='javascript' type='text/javascript'>
if (!document.getElementById('tools')) document.getElementById('aexp_tools').style.visibility = 'hidden';
if (!document.getElementById('tools~ssh')) document.getElementById('aexp_tools~ssh').style.visibility = 'hidden';
</script>
<li class='catclass'><a href='/blog/cats/system/'>system</a><a href='##' onmousedown=showDiv('system') id='aexp_system'><span class='exp_style' id='exp_system'>[+]</span></a><span class='right_span'>(25)</span></li>
<div id='system' class='catsub'><li><a href='/blog/cats/system~base/?opendiv=system'>base</a><a href='##' onmousedown=showDiv('system~base') id='aexp_system~base'><span class='exp_style' id='exp_system~base'>[+]</span></a><span class='right_span'>12</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('system~base')) document.getElementById('aexp_system~base').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/system~centos/?opendiv=system'>centos</a><a href='##' onmousedown=showDiv('system~centos') id='aexp_system~centos'><span class='exp_style' id='exp_system~centos'>[+]</span></a><span class='right_span'>5</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('system~centos')) document.getElementById('aexp_system~centos').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/system~ubuntu/?opendiv=system'>ubuntu</a><a href='##' onmousedown=showDiv('system~ubuntu') id='aexp_system~ubuntu'><span class='exp_style' id='exp_system~ubuntu'>[+]</span></a><span class='right_span'>8</span></li>
</div><script language='javascript' type='text/javascript'>
if (!document.getElementById('system')) document.getElementById('aexp_system').style.visibility = 'hidden';
if (!document.getElementById('system~ubuntu')) document.getElementById('aexp_system~ubuntu').style.visibility = 'hidden';
</script>
<li class='catclass'><a href='/blog/cats/kernel/'>kernel</a><a href='##' onmousedown=showDiv('kernel') id='aexp_kernel'><span class='exp_style' id='exp_kernel'>[+]</span></a><span class='right_span'>(96)</span></li>
<div id='kernel' class='catsub'><li><a href='/blog/cats/kernel~base/?opendiv=kernel'>base</a><a href='##' onmousedown=showDiv('kernel~base') id='aexp_kernel~base'><span class='exp_style' id='exp_kernel~base'>[+]</span></a><span class='right_span'>13</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('kernel~base')) document.getElementById('aexp_kernel~base').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/kernel~irq/?opendiv=kernel'>irq</a><a href='##' onmousedown=showDiv('kernel~irq') id='aexp_kernel~irq'><span class='exp_style' id='exp_kernel~irq'>[+]</span></a><span class='right_span'>10</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('kernel~irq')) document.getElementById('aexp_kernel~irq').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/kernel~kexec/?opendiv=kernel'>kexec</a><a href='##' onmousedown=showDiv('kernel~kexec') id='aexp_kernel~kexec'><span class='exp_style' id='exp_kernel~kexec'>[+]</span></a><span class='right_span'>1</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('kernel~kexec')) document.getElementById('aexp_kernel~kexec').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/kernel~mm/?opendiv=kernel'>mm</a><a href='##' onmousedown=showDiv('kernel~mm') id='aexp_kernel~mm'><span class='exp_style' id='exp_kernel~mm'>[+]</span></a><span class='right_span'>17</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('kernel~mm')) document.getElementById('aexp_kernel~mm').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/kernel~net/?opendiv=kernel'>net</a><a href='##' onmousedown=showDiv('kernel~net') id='aexp_kernel~net'><span class='exp_style' id='exp_kernel~net'>[+]</span></a><span class='right_span'>41</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('kernel~net')) document.getElementById('aexp_kernel~net').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/kernel~sched/?opendiv=kernel'>sched</a><a href='##' onmousedown=showDiv('kernel~sched') id='aexp_kernel~sched'><span class='exp_style' id='exp_kernel~sched'>[+]</span></a><span class='right_span'>14</span></li>
</div><script language='javascript' type='text/javascript'>
if (!document.getElementById('kernel')) document.getElementById('aexp_kernel').style.visibility = 'hidden';
if (!document.getElementById('kernel~sched')) document.getElementById('aexp_kernel~sched').style.visibility = 'hidden';
</script>
<li class='catclass'><a href='/blog/cats/android/'>android</a><a href='##' onmousedown=showDiv('android') id='aexp_android'><span class='exp_style' id='exp_android'>[+]</span></a><span class='right_span'>(17)</span></li>
<div id='android' class='catsub'><li><a href='/blog/cats/android~base/?opendiv=android'>base</a><a href='##' onmousedown=showDiv('android~base') id='aexp_android~base'><span class='exp_style' id='exp_android~base'>[+]</span></a><span class='right_span'>8</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('android~base')) document.getElementById('aexp_android~base').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/android~i9507v/?opendiv=android'>i9507v</a><a href='##' onmousedown=showDiv('android~i9507v') id='aexp_android~i9507v'><span class='exp_style' id='exp_android~i9507v'>[+]</span></a><span class='right_span'>1</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('android~i9507v')) document.getElementById('aexp_android~i9507v').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/android~me722/?opendiv=android'>me722</a><a href='##' onmousedown=showDiv('android~me722') id='aexp_android~me722'><span class='exp_style' id='exp_android~me722'>[+]</span></a><span class='right_span'>3</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('android~me722')) document.getElementById('aexp_android~me722').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/android~nx403a/?opendiv=android'>nx403a</a><a href='##' onmousedown=showDiv('android~nx403a') id='aexp_android~nx403a'><span class='exp_style' id='exp_android~nx403a'>[+]</span></a><span class='right_span'>3</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('android~nx403a')) document.getElementById('aexp_android~nx403a').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/android~s5830/?opendiv=android'>s5830</a><a href='##' onmousedown=showDiv('android~s5830') id='aexp_android~s5830'><span class='exp_style' id='exp_android~s5830'>[+]</span></a><span class='right_span'>2</span></li>
</div><script language='javascript' type='text/javascript'>
if (!document.getElementById('android')) document.getElementById('aexp_android').style.visibility = 'hidden';
if (!document.getElementById('android~s5830')) document.getElementById('aexp_android~s5830').style.visibility = 'hidden';
</script>
<li class='catclass'><a href='/blog/cats/debug/'>debug</a><a href='##' onmousedown=showDiv('debug') id='aexp_debug'><span class='exp_style' id='exp_debug'>[+]</span></a><span class='right_span'>(55)</span></li>
<div id='debug' class='catsub'><li><a href='/blog/cats/debug~base/?opendiv=debug'>base</a><a href='##' onmousedown=showDiv('debug~base') id='aexp_debug~base'><span class='exp_style' id='exp_debug~base'>[+]</span></a><span class='right_span'>16</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('debug~base')) document.getElementById('aexp_debug~base').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/debug~dwarf/?opendiv=debug'>dwarf</a><a href='##' onmousedown=showDiv('debug~dwarf') id='aexp_debug~dwarf'><span class='exp_style' id='exp_debug~dwarf'>[+]</span></a><span class='right_span'>4</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('debug~dwarf')) document.getElementById('aexp_debug~dwarf').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/debug~gdb/?opendiv=debug'>gdb</a><a href='##' onmousedown=showDiv('debug~gdb') id='aexp_debug~gdb'><span class='exp_style' id='exp_debug~gdb'>[+]</span></a><span class='right_span'>6</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('debug~gdb')) document.getElementById('aexp_debug~gdb').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/debug~kdump,-crash/?opendiv=debug'>kdump、crash</a><a href='##' onmousedown=showDiv('debug~kdump、crash') id='aexp_debug~kdump、crash'><span class='exp_style' id='exp_debug~kdump、crash'>[+]</span></a><span class='right_span'>7</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('debug~kdump、crash')) document.getElementById('aexp_debug~kdump、crash').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/debug~kgdb/?opendiv=debug'>kgdb</a><a href='##' onmousedown=showDiv('debug~kgdb') id='aexp_debug~kgdb'><span class='exp_style' id='exp_debug~kgdb'>[+]</span></a><span class='right_span'>3</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('debug~kgdb')) document.getElementById('aexp_debug~kgdb').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/debug~kprobe/?opendiv=debug'>kprobe</a><a href='##' onmousedown=showDiv('debug~kprobe') id='aexp_debug~kprobe'><span class='exp_style' id='exp_debug~kprobe'>[+]</span></a><span class='right_span'>4</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('debug~kprobe')) document.getElementById('aexp_debug~kprobe').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/debug~mark/?opendiv=debug'>mark</a><a href='##' onmousedown=showDiv('debug~mark') id='aexp_debug~mark'><span class='exp_style' id='exp_debug~mark'>[+]</span></a><span class='right_span'>12</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('debug~mark')) document.getElementById('aexp_debug~mark').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/debug~systemtap/?opendiv=debug'>systemtap</a><a href='##' onmousedown=showDiv('debug~systemtap') id='aexp_debug~systemtap'><span class='exp_style' id='exp_debug~systemtap'>[+]</span></a><span class='right_span'>3</span></li>
</div><script language='javascript' type='text/javascript'>
if (!document.getElementById('debug')) document.getElementById('aexp_debug').style.visibility = 'hidden';
if (!document.getElementById('debug~systemtap')) document.getElementById('aexp_debug~systemtap').style.visibility = 'hidden';
</script>
<li><div style="background:#DDD; height:0.3em;"></div></li><li class='catclass'><a href='/blog/cats/algorithm/'>algorithm</a><a href='##' onmousedown=showDiv('algorithm') id='aexp_algorithm'><span class='exp_style' id='exp_algorithm'>[+]</span></a><span class='right_span'>(26)</span></li>
<div id='algorithm' class='catsub'><li><a href='/blog/cats/algorithm~base/?opendiv=algorithm'>base</a><a href='##' onmousedown=showDiv('algorithm~base') id='aexp_algorithm~base'><span class='exp_style' id='exp_algorithm~base'>[+]</span></a><span class='right_span'>19</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('algorithm~base')) document.getElementById('aexp_algorithm~base').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/algorithm~dp/?opendiv=algorithm'>dp</a><a href='##' onmousedown=showDiv('algorithm~dp') id='aexp_algorithm~dp'><span class='exp_style' id='exp_algorithm~dp'>[+]</span></a><span class='right_span'>1</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('algorithm~dp')) document.getElementById('aexp_algorithm~dp').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/algorithm~ds/?opendiv=algorithm'>ds</a><a href='##' onmousedown=showDiv('algorithm~ds') id='aexp_algorithm~ds'><span class='exp_style' id='exp_algorithm~ds'>[+]</span></a><span class='right_span'>4</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('algorithm~ds')) document.getElementById('aexp_algorithm~ds').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/algorithm~tc/?opendiv=algorithm'>tc</a><a href='##' onmousedown=showDiv('algorithm~tc') id='aexp_algorithm~tc'><span class='exp_style' id='exp_algorithm~tc'>[+]</span></a><span class='right_span'>2</span></li>
</div><script language='javascript' type='text/javascript'>
if (!document.getElementById('algorithm')) document.getElementById('aexp_algorithm').style.visibility = 'hidden';
if (!document.getElementById('algorithm~tc')) document.getElementById('aexp_algorithm~tc').style.visibility = 'hidden';
</script>
<li class='catclass'><a href='/blog/cats/blog/'>blog</a><a href='##' onmousedown=showDiv('blog') id='aexp_blog'><span class='exp_style' id='exp_blog'>[+]</span></a><span class='right_span'>(11)</span></li>
<div id='blog' class='catsub'><li><a href='/blog/cats/blog~hello/?opendiv=blog'>hello</a><a href='##' onmousedown=showDiv('blog~hello') id='aexp_blog~hello'><span class='exp_style' id='exp_blog~hello'>[+]</span></a><span class='right_span'>1</span></li>
<div id='blog~hello' class='catsub2'><li><a href='/blog/cats/blog~hello~hi/?opendiv=blog~hello'>hi</a><span class='right_span'>1</span></li>
</div><script language='javascript' type='text/javascript'>
if (!document.getElementById('blog~hello')) document.getElementById('aexp_blog~hello').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/blog~jekyll/?opendiv=blog'>jekyll</a><a href='##' onmousedown=showDiv('blog~jekyll') id='aexp_blog~jekyll'><span class='exp_style' id='exp_blog~jekyll'>[+]</span></a><span class='right_span'>2</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('blog~jekyll')) document.getElementById('aexp_blog~jekyll').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/blog~markdown/?opendiv=blog'>markdown</a><a href='##' onmousedown=showDiv('blog~markdown') id='aexp_blog~markdown'><span class='exp_style' id='exp_blog~markdown'>[+]</span></a><span class='right_span'>1</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('blog~markdown')) document.getElementById('aexp_blog~markdown').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/blog~octopress/?opendiv=blog'>octopress</a><a href='##' onmousedown=showDiv('blog~octopress') id='aexp_blog~octopress'><span class='exp_style' id='exp_blog~octopress'>[+]</span></a><span class='right_span'>5</span></li>
<script language='javascript' type='text/javascript'>
if (!document.getElementById('blog~octopress')) document.getElementById('aexp_blog~octopress').style.visibility = 'hidden';
</script>
<li><a href='/blog/cats/blog~ruby/?opendiv=blog'>ruby</a><a href='##' onmousedown=showDiv('blog~ruby') id='aexp_blog~ruby'><span class='exp_style' id='exp_blog~ruby'>[+]</span></a><span class='right_span'>2</span></li>
</div><script language='javascript' type='text/javascript'>
if (!document.getElementById('blog')) document.getElementById('aexp_blog').style.visibility = 'hidden';
if (!document.getElementById('blog~ruby')) document.getElementById('aexp_blog~ruby').style.visibility = 'hidden';
</script>

</ul>
</div>
</body>
</html>
</section>

<section>
<h1>Date Categories</h1>
<head>
</head>
<body>
<div id="menu">
<ul>
<li class='catclass'><a href='/blog/cats/2015/'>2015</a><a href='##' onmousedown=showDiv('2015')><span class='exp_style' id='exp_2015'>[+]</span></a><span class='right_span'>(83)</span></li>
<div id='2015' class='catsub'><li><a href='/blog/cats/2015~05/?opendiv=2015'>2015-05</a><span class='right_span'>11</span></li>
<li><a href='/blog/cats/2015~04/?opendiv=2015'>2015-04</a><span class='right_span'>23</span></li>
<li><a href='/blog/cats/2015~03/?opendiv=2015'>2015-03</a><span class='right_span'>19</span></li>
<li><a href='/blog/cats/2015~02/?opendiv=2015'>2015-02</a><span class='right_span'>11</span></li>
<li><a href='/blog/cats/2015~01/?opendiv=2015'>2015-01</a><span class='right_span'>19</span></li>
</div><li class='catclass'><a href='/blog/cats/2014/'>2014</a><a href='##' onmousedown=showDiv('2014')><span class='exp_style' id='exp_2014'>[+]</span></a><span class='right_span'>(112)</span></li>
<div id='2014' class='catsub'><li><a href='/blog/cats/2014~12/?opendiv=2014'>2014-12</a><span class='right_span'>21</span></li>
<li><a href='/blog/cats/2014~11/?opendiv=2014'>2014-11</a><span class='right_span'>19</span></li>
<li><a href='/blog/cats/2014~10/?opendiv=2014'>2014-10</a><span class='right_span'>13</span></li>
<li><a href='/blog/cats/2014~09/?opendiv=2014'>2014-09</a><span class='right_span'>7</span></li>
<li><a href='/blog/cats/2014~08/?opendiv=2014'>2014-08</a><span class='right_span'>15</span></li>
<li><a href='/blog/cats/2014~07/?opendiv=2014'>2014-07</a><span class='right_span'>2</span></li>
<li><a href='/blog/cats/2014~06/?opendiv=2014'>2014-06</a><span class='right_span'>4</span></li>
<li><a href='/blog/cats/2014~05/?opendiv=2014'>2014-05</a><span class='right_span'>7</span></li>
<li><a href='/blog/cats/2014~04/?opendiv=2014'>2014-04</a><span class='right_span'>9</span></li>
<li><a href='/blog/cats/2014~03/?opendiv=2014'>2014-03</a><span class='right_span'>2</span></li>
<li><a href='/blog/cats/2014~02/?opendiv=2014'>2014-02</a><span class='right_span'>11</span></li>
<li><a href='/blog/cats/2014~01/?opendiv=2014'>2014-01</a><span class='right_span'>2</span></li>
</div><li class='catclass'><a href='/blog/cats/2013/'>2013</a><a href='##' onmousedown=showDiv('2013')><span class='exp_style' id='exp_2013'>[+]</span></a><span class='right_span'>(60)</span></li>
<div id='2013' class='catsub'><li><a href='/blog/cats/2013~12/?opendiv=2013'>2013-12</a><span class='right_span'>5</span></li>
<li><a href='/blog/cats/2013~11/?opendiv=2013'>2013-11</a><span class='right_span'>8</span></li>
<li><a href='/blog/cats/2013~10/?opendiv=2013'>2013-10</a><span class='right_span'>8</span></li>
<li><a href='/blog/cats/2013~09/?opendiv=2013'>2013-09</a><span class='right_span'>5</span></li>
<li><a href='/blog/cats/2013~08/?opendiv=2013'>2013-08</a><span class='right_span'>5</span></li>
<li><a href='/blog/cats/2013~07/?opendiv=2013'>2013-07</a><span class='right_span'>3</span></li>
<li><a href='/blog/cats/2013~06/?opendiv=2013'>2013-06</a><span class='right_span'>9</span></li>
<li><a href='/blog/cats/2013~05/?opendiv=2013'>2013-05</a><span class='right_span'>8</span></li>
<li><a href='/blog/cats/2013~03/?opendiv=2013'>2013-03</a><span class='right_span'>6</span></li>
<li><a href='/blog/cats/2013~02/?opendiv=2013'>2013-02</a><span class='right_span'>2</span></li>
<li><a href='/blog/cats/2013~01/?opendiv=2013'>2013-01</a><span class='right_span'>1</span></li>
</div><li class='catclass'><a href='/blog/cats/2012/'>2012</a><a href='##' onmousedown=showDiv('2012')><span class='exp_style' id='exp_2012'>[+]</span></a><span class='right_span'>(35)</span></li>
<div id='2012' class='catsub'><li><a href='/blog/cats/2012~12/?opendiv=2012'>2012-12</a><span class='right_span'>4</span></li>
<li><a href='/blog/cats/2012~11/?opendiv=2012'>2012-11</a><span class='right_span'>2</span></li>
<li><a href='/blog/cats/2012~10/?opendiv=2012'>2012-10</a><span class='right_span'>4</span></li>
<li><a href='/blog/cats/2012~08/?opendiv=2012'>2012-08</a><span class='right_span'>1</span></li>
<li><a href='/blog/cats/2012~05/?opendiv=2012'>2012-05</a><span class='right_span'>2</span></li>
<li><a href='/blog/cats/2012~04/?opendiv=2012'>2012-04</a><span class='right_span'>9</span></li>
<li><a href='/blog/cats/2012~03/?opendiv=2012'>2012-03</a><span class='right_span'>6</span></li>
<li><a href='/blog/cats/2012~02/?opendiv=2012'>2012-02</a><span class='right_span'>5</span></li>
<li><a href='/blog/cats/2012~01/?opendiv=2012'>2012-01</a><span class='right_span'>2</span></li>
</div><li class='catclass'><a href='/blog/cats/2011/'>2011</a><a href='##' onmousedown=showDiv('2011')><span class='exp_style' id='exp_2011'>[+]</span></a><span class='right_span'>(35)</span></li>
<div id='2011' class='catsub'><li><a href='/blog/cats/2011~12/?opendiv=2011'>2011-12</a><span class='right_span'>8</span></li>
<li><a href='/blog/cats/2011~11/?opendiv=2011'>2011-11</a><span class='right_span'>4</span></li>
<li><a href='/blog/cats/2011~08/?opendiv=2011'>2011-08</a><span class='right_span'>3</span></li>
<li><a href='/blog/cats/2011~07/?opendiv=2011'>2011-07</a><span class='right_span'>3</span></li>
<li><a href='/blog/cats/2011~06/?opendiv=2011'>2011-06</a><span class='right_span'>1</span></li>
<li><a href='/blog/cats/2011~05/?opendiv=2011'>2011-05</a><span class='right_span'>1</span></li>
<li><a href='/blog/cats/2011~04/?opendiv=2011'>2011-04</a><span class='right_span'>1</span></li>
<li><a href='/blog/cats/2011~03/?opendiv=2011'>2011-03</a><span class='right_span'>11</span></li>
<li><a href='/blog/cats/2011~02/?opendiv=2011'>2011-02</a><span class='right_span'>2</span></li>
<li><a href='/blog/cats/2011~01/?opendiv=2011'>2011-01</a><span class='right_span'>1</span></li>
</div><li class='catclass'><a href='/blog/cats/2010/'>2010</a><a href='##' onmousedown=showDiv('2010')><span class='exp_style' id='exp_2010'>[+]</span></a><span class='right_span'>(1)</span></li>
<div id='2010' class='catsub'><li><a href='/blog/cats/2010~07/?opendiv=2010'>2010-07</a><span class='right_span'>1</span></li>
</div><li class='catclass'><a href='/blog/cats/2009/'>2009</a><a href='##' onmousedown=showDiv('2009')><span class='exp_style' id='exp_2009'>[+]</span></a><span class='right_span'>(8)</span></li>
<div id='2009' class='catsub'><li><a href='/blog/cats/2009~12/?opendiv=2009'>2009-12</a><span class='right_span'>1</span></li>
<li><a href='/blog/cats/2009~10/?opendiv=2009'>2009-10</a><span class='right_span'>4</span></li>
<li><a href='/blog/cats/2009~09/?opendiv=2009'>2009-09</a><span class='right_span'>2</span></li>
<li><a href='/blog/cats/2009~07/?opendiv=2009'>2009-07</a><span class='right_span'>1</span></li>
</div>
</ul>
</div>
</body>
</html>
</section>

<section>
<h1>Tags</h1>
<ul class="tag-cloud">
<a style="font-size: 131%" href="/tags/gdb/">gdb(6)</a>
<a style="font-size: 100%" href="/tags/hello/">hello(1)</a>
<a style="font-size: 150%" href="/tags/koj/">koj(18)</a>
<a style="font-size: 112%" href="/tags/nvidia/">nvidia(2)</a>
<a style="font-size: 100%" href="/tags/patch/">patch(1)</a>
<a style="font-size: 100%" href="/tags/reg-exp/">reg_exp(1)</a>

</ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/05/11/debug-mark-tcp_read_sock_bug/">tcp_read_sock BUG</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/11/debug-mark-tcp_match_skb_to_sack_bug/">tcp_match_skb_to_sack BUG</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/08/debug-mark-gro-attention/">gro收包</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/08/debug-mark-tcp_trim_head_bug/">tcp_trim_head BUG</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/08/debug-mark-write_queue/">如果sk_write_queue异常</a>
      </li>
    
  </ul>
</section>
<section>
<h1>Links</h1>
<ul>
	<li>
		<a href=http://hi.baidu.com/abcdxyzk target=_blank>My blog</a>
	</li>
</ul>
</section>

  
<section id="comment_sidebar">
<h1>Recent Comments</h1>

<script type="text/javascript" src="http://abcdxyzk.disqus.com/recent_comments_widget.js?num_items=5&hide_avatars=0&avatar_size=32&excerpt_length=20"></script><a href="http://disqus.com/">Powered by Disqus</a>

</section>


</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - kk -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
  <a title="Top" href="#" id="scroll2top" style="position: fixed; height: 50px; bottom: 30px; right: 25px; cursor: pointer; z-index: 9999; display: block; opacity: 1;"><img src="/images/scrollup.png"></a>
  <script src="/javascripts/scroll2top.js"></script>
  <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1253604690'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s95.cnzz.com/z_stat.php%3Fid%3D1253604690' type='text/javascript'%3E%3C/script%3E"));</script>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'abcdxyzk';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





</body>
</html>
